function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,s=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t(this,e),this.x=n,this.y=r}return r(e,[{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"add",value:function(e){return new this.constructor(this.x+e.x,this.y+e.y)}},{key:"subtract",value:function(e){return new this.constructor(this.x-e.x,this.y-e.y)}},{key:"multiply",value:function(e){return new this.constructor(this.x*e,this.y*e)}},{key:"divide",value:function(e){return new this.constructor(this.x/e,this.y/e)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"precisionEquals",value:function(e,t){return Math.abs(this.x-e.x)<t&&Math.abs(this.y-e.y)<t}},{key:"lerp",value:function(e,t){var n=1-t;return new this.constructor(this.x*n+e.x*t,this.y*n+e.y*t)}},{key:"distanceFrom",value:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}},{key:"min",value:function(e){return new this.constructor(Math.min(this.x,e.x),Math.min(this.y,e.y))}},{key:"max",value:function(e){return new this.constructor(Math.max(this.x,e.x),Math.max(this.y,e.y))}},{key:"transform",value:function(e){return new this.constructor(e.a*this.x+e.c*this.y+e.e,e.b*this.x+e.d*this.y+e.f)}},{key:"toString",value:function(){return"point(".concat(this.x,",").concat(this.y,")")}}]),e}(),o=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t(this,e),this.x=n,this.y=r}return r(e,[{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"magnitude",value:function(){return this.x*this.x+this.y*this.y}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"determinant",value:function(e){return this.x*e.y-this.y*e.x}},{key:"unit",value:function(){return this.divide(this.length())}},{key:"add",value:function(e){return new this.constructor(this.x+e.x,this.y+e.y)}},{key:"subtract",value:function(e){return new this.constructor(this.x-e.x,this.y-e.y)}},{key:"multiply",value:function(e){return new this.constructor(this.x*e,this.y*e)}},{key:"divide",value:function(e){return new this.constructor(this.x/e,this.y/e)}},{key:"angleBetween",value:function(e){var t=this.dot(e)/(this.length()*e.length());t=Math.max(-1,Math.min(t,1));var n=Math.acos(t);return this.cross(e)<0?-n:n}},{key:"perp",value:function(){return new this.constructor(-this.y,this.x)}},{key:"perpendicular",value:function(e){return this.subtract(this.project(e))}},{key:"project",value:function(e){var t=this.dot(e)/e.dot(e);return e.multiply(t)}},{key:"transform",value:function(e){return new this.constructor(e.a*this.x+e.c*this.y,e.b*this.x+e.d*this.y)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"precisionEquals",value:function(e,t){return Math.abs(this.x-e.x)<t&&Math.abs(this.y-e.y)<t}},{key:"toString",value:function(){return"vector(".concat(this.x,",").concat(this.y,")")}}],[{key:"fromPoints",value:function(t,n){return new e(n.x-t.x,n.y-t.y)}}]),e}(),u=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;t(this,e),this.a=n,this.b=r,this.c=a,this.d=s,this.e=i,this.f=o}return r(e,[{key:"multiply",value:function(e){return this.isIdentity()?e:e.isIdentity()?this:new this.constructor(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)}},{key:"inverse",value:function(){if(this.isIdentity())return this;var e=this.a*this.d-this.b*this.c;if(0===e)throw new Error("Matrix is not invertible");var t=1/e,n=this.f*this.c-this.e*this.d,r=this.e*this.b-this.f*this.a;return new this.constructor(this.d*t,-this.b*t,-this.c*t,this.a*t,n*t,r*t)}},{key:"translate",value:function(e,t){return new this.constructor(this.a,this.b,this.c,this.d,this.a*e+this.c*t+this.e,this.b*e+this.d*t+this.f)}},{key:"scale",value:function(e){return new this.constructor(this.a*e,this.b*e,this.c*e,this.d*e,this.e,this.f)}},{key:"scaleAt",value:function(e,t){var n=t.x-e*t.x,r=t.y-e*t.y;return new this.constructor(this.a*e,this.b*e,this.c*e,this.d*e,this.a*n+this.c*r+this.e,this.b*n+this.d*r+this.f)}},{key:"scaleNonUniform",value:function(e,t){return new this.constructor(this.a*e,this.b*e,this.c*t,this.d*t,this.e,this.f)}},{key:"scaleNonUniformAt",value:function(e,t,n){var r=n.x-e*n.x,a=n.y-t*n.y;return new this.constructor(this.a*e,this.b*e,this.c*t,this.d*t,this.a*r+this.c*a+this.e,this.b*r+this.d*a+this.f)}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e);return new this.constructor(this.a*t+this.c*n,this.b*t+this.d*n,this.a*-n+this.c*t,this.b*-n+this.d*t,this.e,this.f)}},{key:"rotateAt",value:function(e,t){var n=Math.cos(e),r=Math.sin(e),a=t.x,s=t.y,i=this.a*n+this.c*r,o=this.b*n+this.d*r,u=this.c*n-this.a*r,l=this.d*n-this.b*r;return new this.constructor(i,o,u,l,(this.a-i)*a+(this.c-u)*s+this.e,(this.b-o)*a+(this.d-l)*s+this.f)}},{key:"rotateFromVector",value:function(e){var t=e.unit(),n=t.x,r=t.y;return new this.constructor(this.a*n+this.c*r,this.b*n+this.d*r,this.a*-r+this.c*n,this.b*-r+this.d*n,this.e,this.f)}},{key:"flipX",value:function(){return new this.constructor(-this.a,-this.b,this.c,this.d,this.e,this.f)}},{key:"flipY",value:function(){return new this.constructor(this.a,this.b,-this.c,-this.d,this.e,this.f)}},{key:"skewX",value:function(e){var t=Math.tan(e);return new this.constructor(this.a,this.b,this.c+this.a*t,this.d+this.b*t,this.e,this.f)}},{key:"skewY",value:function(e){var t=Math.tan(e);return new this.constructor(this.a+this.c*t,this.b+this.d*t,this.c,this.d,this.e,this.f)}},{key:"isIdentity",value:function(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}},{key:"isInvertible",value:function(){return this.a*this.d-this.b*this.c!=0}},{key:"getScale",value:function(){return{scaleX:Math.sqrt(this.a*this.a+this.c*this.c),scaleY:Math.sqrt(this.b*this.b+this.d*this.d)}}},{key:"getDecomposition",value:function(){var e=.5*(this.a+this.d),t=.5*(this.a-this.d),n=.5*(this.b+this.c),r=.5*(this.b-this.c),a=Math.sqrt(e*e+r*r),s=Math.sqrt(t*t+n*n),i=a+s,o=a-s,u=Math.atan2(n,t),l=Math.atan2(r,e),c=.5*(l-u),h=.5*(l+u);return{translation:this.constructor.translation(this.e,this.f),rotation:this.constructor.rotation(h),scale:this.constructor.nonUniformScaling(i,o),rotation0:this.constructor.rotation(c)}}},{key:"equals",value:function(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}},{key:"precisionEquals",value:function(e,t){return Math.abs(this.a-e.a)<t&&Math.abs(this.b-e.b)<t&&Math.abs(this.c-e.c)<t&&Math.abs(this.d-e.d)<t&&Math.abs(this.e-e.e)<t&&Math.abs(this.f-e.f)<t}},{key:"toString",value:function(){return"matrix(".concat(this.a,",").concat(this.b,",").concat(this.c,",").concat(this.d,",").concat(this.e,",").concat(this.f,")")}}],[{key:"translation",value:function(t,n){return new e(1,0,0,1,t,n)}},{key:"scaling",value:function(t){return new e(t,0,0,t,0,0)}},{key:"scalingAt",value:function(t,n){return new e(t,0,0,t,n.x-n.x*t,n.y-n.y*t)}},{key:"nonUniformScaling",value:function(t,n){return new e(t,0,0,n,0,0)}},{key:"nonUniformScalingAt",value:function(t,n,r){return new e(t,0,0,n,r.x-r.x*t,r.y-r.y*n)}},{key:"rotation",value:function(t){var n=Math.cos(t),r=Math.sin(t);return new e(n,r,-r,n,0,0)}},{key:"rotationAt",value:function(t,n){var r=Math.cos(t),a=Math.sin(t);return new e(r,a,-a,r,n.x-n.x*r+n.y*a,n.y-n.y*r-n.x*a)}},{key:"rotationFromVector",value:function(t){var n=t.unit(),r=n.x,a=n.y;return new e(r,a,-a,r,0,0)}},{key:"xFlip",value:function(){return new e(-1,0,0,1,0,0)}},{key:"yFlip",value:function(){return new e(1,0,0,-1,0,0)}},{key:"xSkew",value:function(t){return new e(1,0,Math.tan(t),1,0,0)}},{key:"ySkew",value:function(t){return new e(1,Math.tan(t),0,1,0,0)}}]),e}();function l(e){return"number"==typeof e?e?e<0?-1:1:e==e?e:NaN:NaN}u.IDENTITY=new u,u.IDENTITY.isIdentity=function(){return!0};var c=function(){function e(){t(this,e),this.coefs=[];for(var n=arguments.length-1;n>=0;n--)this.coefs.push(n<0||arguments.length<=n?void 0:arguments[n]);this._variable="t",this._s=0}return r(e,[{key:"clone",value:function(){var t=new e;return t.coefs=this.coefs.slice(),t}},{key:"eval",value:function(e){if(isNaN(e))throw new TypeError("Parameter must be a number. Found '".concat(e,"'"));for(var t=0,n=this.coefs.length-1;n>=0;n--)t=t*e+this.coefs[n];return t}},{key:"add",value:function(t){for(var n=new e,r=this.getDegree(),a=t.getDegree(),s=Math.max(r,a),i=0;i<=s;i++){var o=i<=r?this.coefs[i]:0,u=i<=a?t.coefs[i]:0;n.coefs[i]=o+u}return n}},{key:"multiply",value:function(t){for(var n=new e,r=0;r<=this.getDegree()+t.getDegree();r++)n.coefs.push(0);for(var a=0;a<=this.getDegree();a++)for(var s=0;s<=t.getDegree();s++)n.coefs[a+s]+=this.coefs[a]*t.coefs[s];return n}},{key:"divideEqualsScalar",value:function(e){for(var t=0;t<this.coefs.length;t++)this.coefs[t]/=e}},{key:"simplifyEquals",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-12,t=this.getDegree();t>=0&&Math.abs(this.coefs[t])<=e;t--)this.coefs.pop()}},{key:"removeZerosEquals",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-15,t=this.coefs,n=10*e*Math.abs(t.reduce((function(e,t){return Math.abs(t)>Math.abs(e)?t:e}))),r=0;r<t.length-1;r++)Math.abs(t[r])<n&&(t[r]=0);return this}},{key:"monicEquals",value:function(){var e=this.coefs;return 1!==e[e.length-1]&&this.divideEqualsScalar(e[e.length-1]),this}},{key:"toString",value:function(){for(var e=[],t=[],n=this.coefs.length-1;n>=0;n--){var r=Math.round(1e3*this.coefs[n])/1e3;if(0!==r){var a=r<0?" - ":" + ";r=Math.abs(r),n>0&&(1===r?r=this._variable:r+=this._variable),n>1&&(r+="^"+n),t.push(a),e.push(r)}}t[0]=" + "===t[0]?"":"-";for(var s="",i=0;i<e.length;i++)s+=t[i]+e[i];return s}},{key:"bisection",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15,s=this.eval(e),i=this.eval(t);if(Math.abs(s)<=r)n=e;else if(Math.abs(i)<=r)n=t;else if(s*i<=0)for(var o=Math.log(t-e),u=Math.LN10*a,l=Math.ceil((o+u)/Math.LN2),c=0;c<l;c++){n=.5*(e+t);var h=this.eval(n);if(Math.abs(h)<=r)break;h*s<0?(t=n,i=h):(e=n,s=h)}return n}},{key:"trapezoid",value:function(e,t,n){if(isNaN(e)||isNaN(t)||isNaN(n))throw new TypeError("Parameters must be numbers");var r=t-e;if(1===n){var a=this.eval(e),s=this.eval(t);this._s=.5*r*(a+s)}else{for(var i=1<<n-2,o=r/i,u=e+.5*o,l=0,c=0;c<i;c++)l+=this.eval(u),u+=o;this._s=.5*(this._s+r*l/i)}if(isNaN(this._s))throw new TypeError("this._s is NaN");return this._s}},{key:"simpson",value:function(e,t){if(isNaN(e)||isNaN(t))throw new TypeError("Parameters must be numbers");for(var n=t-e,r=.5*n*(this.eval(e)+this.eval(t)),a=r,s=4*r/3,i=s,o=r,u=1,l=2;l<=20;l++){for(var c=n/u,h=e+.5*c,y=0,p=1;p<=u;p++)y+=this.eval(h),h+=c;if(s=(4*(r=a=.5*(a+n*y/u))-o)/3,Math.abs(s-i)<1e-7*Math.abs(i))break;i=s,o=r,u<<=1}return s}},{key:"romberg",value:function(t,n){if(isNaN(t)||isNaN(n))throw new TypeError("Parameters must be numbers");var r=new Array(21),a=new Array(21),s={y:0,dy:0};a[0]=1;for(var i=1;i<=20&&(r[i-1]=this.trapezoid(t,n,i),!(i>=3&&(s=e.interpolate(a,r,3,i-3,0),Math.abs(s.dy)<=1e-6*s.y)));i++)r[i]=r[i-1],a[i]=.25*a[i-1];return s.y}},{key:"zeroErrorEstimate",value:function(e){if(void 0===e){var t=this.bounds();e=Math.max(Math.abs(t.minX),Math.abs(t.maxX))}if(e<.001)return 2*Math.abs(this.eval(1e-15));var n=this.coefs.length-1,r=this.coefs[n];return 10*1e-15*this.coefs.reduce((function(t,n,a){var s=n/r*Math.pow(e,a);return s>t?s:t}),0)}},{key:"boundsUpperRealFujiwara",value:function(){var e=this.coefs,t=e.length-1,n=e[t];1!==n&&(e=this.coefs.map((function(e){return e/n})));var r,a=e.map((function(e,n){return n<t?Math.pow(Math.abs(0===n?e/2:e),1/(t-n)):e})),s=function(e,t,n){return r(n)&&(e.max<t?(e.nearmax=e.max,e.max=t):e.nearmax<t&&(e.nearmax=t)),e};r=function(n){return n<t&&e[n]<0};var i=a.reduce(s,{max:0,nearmax:0});return r=function(n){return n<t&&(t%2==n%2?e[n]<0:e[n]>0)},{negX:-2*a.reduce(s,{max:0,nearmax:0}).max,posX:2*i.max}}},{key:"boundsLowerRealFujiwara",value:function(){var t=new e;t.coefs=this.coefs.slice().reverse();var n=t.boundsUpperRealFujiwara();return n.negX=1/n.negX,n.posX=1/n.posX,n}},{key:"bounds",value:function(){var e=this.boundsUpperRealFujiwara(),t={minX:e.negX,maxX:e.posX};return 0===e.negX&&0===e.posX?t:(0===e.negX?t.minX=this.boundsLowerRealFujiwara().posX:0===e.posX&&(t.maxX=this.boundsLowerRealFujiwara().negX),t.minX>t.maxX&&(t.minX=t.maxX=0),t)}},{key:"boundUpperAbsRouche",value:function(){var e=this.coefs,t=e.length-1;return 1+e.reduce((function(e,n,r){return r!==t&&e<(n=Math.abs(n))?n:e}),0)/Math.abs(e[t])}},{key:"boundLowerAbsRouche",value:function(){var e=this.coefs,t=e.reduce((function(e,t,n){return 0!==n&&e<(t=Math.abs(t))?t:e}),0);return Math.abs(e[0])/(Math.abs(e[0])+t)}},{key:"boundsRealLaguerre",value:function(){var e=this.coefs,t=e.length-1,n=-e[t-1]/(t*e[t]),r=e[t-1]*e[t-1]-2*t/(t-1)*e[t]*e[t-2],a=(t-1)/(t*e[t])*Math.sqrt(r);return a<0&&(a=-a),{minX:n-a,maxX:n+a}}},{key:"countRootsDescartes",value:function(){var e=this.coefs,t=e.length-1,n=e.reduce((function(e,t,n){return 0!==e.prev_a&&0!==t&&(e.prev_a<0==t>0&&e.pos++,n%2==0!=e.prev_a<0==(n%2==1!=t>0)&&e.neg++),e.prev_a=t,e}),{pos:0,neg:0,prev_a:0});return{maxRealPos:n.pos,maxRealNeg:n.neg,minComplex:t-(n.pos+n.neg)}}},{key:"getDegree",value:function(){return this.coefs.length-1}},{key:"getDerivative",value:function(){for(var t=new e,n=1;n<this.coefs.length;n++)t.coefs.push(n*this.coefs[n]);return t}},{key:"getRoots",value:function(){var e;switch(this.simplifyEquals(),this.getDegree()){case 0:e=[];break;case 1:e=this.getLinearRoot();break;case 2:e=this.getQuadraticRoots();break;case 3:e=this.getCubicRoots();break;case 4:e=this.getQuarticRoots();break;default:e=[]}return e}},{key:"getRootsInInterval",value:function(e,t){var n=[];function r(e){"number"==typeof e&&n.push(e)}if(0===this.getDegree())throw new RangeError("Unexpected empty polynomial");if(1===this.getDegree())r(this.bisection(e,t));else{var a=this.getDerivative().getRootsInInterval(e,t);if(a.length>0){r(this.bisection(e,a[0]));for(var s=0;s<=a.length-2;s++)r(this.bisection(a[s],a[s+1]));r(this.bisection(a[a.length-1],t))}else r(this.bisection(e,t))}return n}},{key:"getLinearRoot",value:function(){var e=[],t=this.coefs[1];return 0!==t&&e.push(-this.coefs[0]/t),e}},{key:"getQuadraticRoots",value:function(){var e=[];if(2===this.getDegree()){var t=this.coefs[2],n=this.coefs[1]/t,r=n*n-4*(this.coefs[0]/t);if(r>0){var a=Math.sqrt(r);e.push(.5*(-n+a)),e.push(.5*(-n-a))}else 0===r&&e.push(.5*-n)}return e}},{key:"getCubicRoots",value:function(){var e=[];if(3===this.getDegree()){var t=this.coefs[3],n=this.coefs[2]/t,r=this.coefs[1]/t,a=(3*r-n*n)/3,s=(2*n*n*n-9*r*n+27*(this.coefs[0]/t))/27,i=n/3,o=s*s/4+a*a*a/27,u=s/2,l=this.zeroErrorEstimate();if(Math.abs(o)<=l&&(o=0),o>0){var c,h=Math.sqrt(o),y=-u+h;c=y>=0?Math.pow(y,1/3):-Math.pow(-y,1/3),(y=-u-h)>=0?c+=Math.pow(y,1/3):c-=Math.pow(-y,1/3),e.push(c-i)}else if(o<0){var p=Math.sqrt(-a/3),f=Math.atan2(Math.sqrt(-o),-u)/3,x=Math.cos(f),v=Math.sin(f),m=Math.sqrt(3);e.push(2*p*x-i),e.push(-p*(x+m*v)-i),e.push(-p*(x-m*v)-i)}else{var d;d=u>=0?-Math.pow(u,1/3):Math.pow(-u,1/3),e.push(2*d-i),e.push(-d-i)}}return e}},{key:"getQuarticRoots",value:function(){var t=[],n=this.getDegree();if(4===n){var r=new e;r.coefs=this.coefs.slice(),r.divideEqualsScalar(r.coefs[n]);Math.abs(r.coefs[0])<10*1e-15*Math.abs(r.coefs[3])&&(r.coefs[0]=0);for(var a=r.getDerivative(),s=a.getRoots().sort((function(e,t){return e-t})),i=[],o=s.length-1,u=this.bounds(),c=Math.max(Math.abs(u.minX),Math.abs(u.maxX)),h=this.zeroErrorEstimate(c),y=0;y<=o;y++)i.push(r.eval(s[y]));for(var p=0;p<=o;p++)Math.abs(i[p])<h&&(i[p]=0);var f=0,x=Math.max(.1*(u.maxX-u.minX)/n,1e-15),v=[],m=[];if(o>-1){for(0!==i[0]?l(i[0])!==l(r.eval(s[0]-x)-i[0])&&(v.push(s[0]-x),m.push([u.minX,s[0]])):(t.push(s[0],s[0]),f++);f<o;f++)0===i[f+1]?(t.push(s[f+1],s[f+1]),f++):l(i[f])!==l(i[f+1])&&(v.push((s[f]+s[f+1])/2),m.push([s[f],s[f+1]]));0!==i[o]&&l(i[o])!==l(r.eval(s[o]+x)-i[o])&&(v.push(s[o]+x),m.push([s[o],u.maxX]))}var d=function(e){return r.eval(e)},b=function(e){return a.eval(e)};if(v.length>0)for(f=0;f<v.length;f++)v[f]=e.newtonSecantBisection(v[f],d,b,32,m[f][0],m[f][1]);t=t.concat(v)}return t}}],[{key:"interpolate",value:function(e,t,n,r,a){if(e.constructor!==Array||t.constructor!==Array)throw new TypeError("xs and ys must be arrays");if(isNaN(n)||isNaN(r)||isNaN(a))throw new TypeError("n, offset, and x must be numbers");var s,i,o=0,u=new Array(n),l=new Array(n),c=0,h=Math.abs(a-e[r]);for(s=0;s<n;s++){var y=Math.abs(a-e[r+s]);y<h&&(c=s,h=y),u[s]=l[s]=t[r+s]}i=t[r+c],c--;for(var p=1;p<n;p++){for(s=0;s<n-p;s++){var f=e[r+s]-a,x=e[r+s+p]-a,v=u[s+1]-l[s],m=f-x;if(0===m)throw new RangeError("Unable to interpolate polynomial. Two numbers in n were identical (to within roundoff)");m=v/m,l[s]=x*m,u[s]=f*m}i+=o=2*(c+1)<n-p?u[c+1]:l[c--]}return{y:i,dy:o}}},{key:"newtonSecantBisection",value:function(e,t,n,r,a,s){var i,o,u,c,h,y,p,f=0,x=0;i=e;var v=Math.pow(10,-14),m="number"==typeof a&&"number"==typeof s;if(m){if(a>s)throw new RangeError("Min must be greater than max");if(y=t(a),p=t(s),l(y)===l(p))throw new RangeError("Y values of bounds must be of opposite sign")}for(var d=function(){return Math.abs(u)<=v*Math.abs(i)||x===i-u-i},b=0;b<r;b++){if(0===(o=n(i))){if(0===f)throw new RangeError("df(x) is zero");o=f}if(f=o,h=t(i),c=i-(u=h/o),d())break;if(m){if(l(h)===l(p))s=i,p=h;else{if(l(h)!==l(y)){i=c;break}a=i,y=h}if(c<a||c>s){if(l(y)===l(p))break;var g=p-y,w=s-a;if(u=0===g?i-(a+.5*w):Math.abs(g/Math.min(y,p))>50?i-(a+w*(.5+(Math.abs(y)<Math.abs(p)?-.25:.25))):i-(a-y/g*w),c=i-u,d())break}}x=i-c,i=c}return i}}]),e}(),h=function(){var e=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},t=[1,6],n=[1,19],r=[1,7],a=[1,10],s=[1,13],i=[1,32],o=[1,14],u=[1,38],l=[1,15],c=[1,22],h=[1,37],y=[1,25],p=[1,28],f=[1,29],x=[1,33],v=[1,34],m=[1,36],d=[1,35],b=[1,5],g=[1,5,14,16,24,28,56],w=[1,61],k=[1,63],E=[1,62],P=[1,50],A=[1,56],M=[1,45],S=[1,46],R=[1,47],_=[1,48],I=[1,49],T=[1,51],N=[1,53],X=[1,54],Y=[1,59],C=[1,60],L=[1,5,14,16,24,28,56,69],$=[1,69],D=[1,70],z=[1,71],B=[1,72],O=[1,73],q=[1,74],j=[1,5,14,16,24,28,31,32,34,35,36,37,38,39,56,69],U=[1,75],V=[1,76],F=[1,77],G=[1,78],Q=[1,79],H=[1,80],Z=[1,5,14,16,24,28,31,32,34,35,36,37,38,39,41,42,43,44,45,46,56,69],W=[1,5,14,16,24,28,31,32,34,35,36,37,38,39,41,42,43,44,45,46,52,55,56,69],J=[2,51],K=[1,5,14,16,24,28,31,32,34,35,36,37,38,39,41,42,43,44,45,46,52,55,56,69,73],ee=[1,5,14,16,24,28,56,73],te=[1,109],ne=[1,125],re=[1,115],ae=[1,122],se=[1,126],ie=[1,133],oe=[1,135],ue=[1,117],le=[1,129],ce=[1,127],he=[1,134],ye=[1,128],pe=[1,130],fe=[1,138],xe=[1,120],ve=[1,118],me=[1,119],de=[1,121],be=[1,137],ge=[1,124],we=[1,131],ke=[1,132],Ee=[1,136],Pe=[1,123],Ae=[1,162],Me=[1,165],Se=[14,56],Re=[14,28],_e=[1,177],Ie=[14,24,56],Te=[14,24,56,73],Ne=[14,28,73],Xe=[14,24],Ye=[1,5,14,28,56],Ce=[1,201],Le={trace:function(){},yy:{},symbols_:{error:2,program:3,statements:4,";":5,statement:6,assignment:7,sequence:8,LET:9,IDENTIFIER:10,"=":11,DEF:12,sequences:13,",":14,steps:15,"|>":16,step:17,"=~":18,namedPattern:19,expression:20,booleanExpression:21,MAP:22,"(":23,")":24,PATTERNS:25,"{":26,patterns:27,"}":28,SEQUENCES:29,relationalExpression:30,AND:31,OR:32,mathExpression:33,"<":34,"<=":35,"==":36,"!=":37,">=":38,">":39,callExpression:40,"+":41,"-":42,"*":43,"/":44,MOD:45,POW:46,argumentList:47,unaryExpression:48,memberExpression:49,NOT:50,primaryExpression:51,".":52,name:53,integer:54,"[":55,"]":56,boolean:57,NULL_TYPE:58,float:59,string:60,UNDEFINED_TYPE:61,$:62,arrayExpression:63,objectExpression:64,expressionElements:65,expressionElement:66,expressionProperties:67,expressionProperty:68,":":69,argument:70,"...":71,pattern:72,AS:73,ANY_TYPE:74,ARRAY_TYPE:75,BOOLEAN_TYPE:76,TRUE:77,FALSE:78,NUMBER_TYPE:79,OBJECT_TYPE:80,STRING_TYPE:81,arrayPattern:82,objectPattern:83,PATTERN:84,ENUMERATION:85,patternElements:86,namedPatternElement:87,patternElement:88,range:89,"..":90,patternProperties:91,namedPatternProperty:92,patternProperty:93,STRING:94,NUMBER:95,$accept:0,$end:1},terminals_:{2:"error",5:";",9:"LET",10:"IDENTIFIER",11:"=",12:"DEF",14:",",16:"|>",18:"=~",22:"MAP",23:"(",24:")",25:"PATTERNS",26:"{",28:"}",29:"SEQUENCES",31:"AND",32:"OR",34:"<",35:"<=",36:"==",37:"!=",38:">=",39:">",41:"+",42:"-",43:"*",44:"/",45:"MOD",46:"POW",50:"NOT",52:".",55:"[",56:"]",58:"NULL_TYPE",61:"UNDEFINED_TYPE",62:"$",69:":",71:"...",73:"AS",74:"ANY_TYPE",75:"ARRAY_TYPE",76:"BOOLEAN_TYPE",77:"TRUE",78:"FALSE",79:"NUMBER_TYPE",80:"OBJECT_TYPE",81:"STRING_TYPE",84:"PATTERN",85:"ENUMERATION",90:"..",94:"STRING",95:"NUMBER"},productions_:[0,[3,1],[3,2],[4,3],[4,1],[6,1],[6,1],[7,4],[7,4],[13,3],[13,1],[8,1],[15,3],[15,1],[17,2],[17,1],[20,1],[20,6],[20,4],[20,4],[21,1],[21,3],[21,3],[30,1],[30,3],[30,3],[30,3],[30,3],[30,3],[30,3],[33,1],[33,3],[33,3],[33,3],[33,3],[33,3],[33,3],[40,3],[40,4],[40,1],[48,1],[48,2],[49,1],[49,3],[49,3],[49,4],[51,1],[51,1],[51,1],[51,1],[51,1],[51,1],[51,1],[51,1],[51,1],[51,3],[63,2],[63,3],[65,3],[65,1],[66,1],[66,1],[64,2],[64,3],[67,3],[67,1],[68,3],[68,1],[68,1],[47,3],[47,1],[70,1],[70,2],[27,3],[27,1],[19,1],[19,3],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,2],[72,2],[72,1],[82,2],[82,3],[86,3],[86,1],[87,1],[87,3],[88,1],[88,3],[88,3],[88,5],[89,3],[89,2],[89,2],[89,1],[83,2],[83,3],[91,3],[91,1],[92,1],[92,3],[93,3],[93,1],[57,1],[57,1],[60,1],[54,1],[59,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1],[53,1]],performAction:function(e,t,n,r,a,s,i){var o=s.length-1;switch(a){case 1:return s[o];case 2:return s[o-1];case 3:case 9:case 12:case 58:case 64:case 69:case 73:case 96:case 110:s[o-2].push(s[o]),this.$=s[o-2];break;case 4:case 10:case 13:case 59:case 65:case 70:case 74:case 97:case 111:this.$=[s[o]];break;case 5:case 6:case 14:case 15:case 16:case 20:case 23:case 30:case 39:case 40:case 42:case 53:case 54:case 60:case 61:case 68:case 71:case 112:case 121:case 122:case 123:case 124:case 125:case 126:case 127:case 128:case 129:case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 137:case 138:case 139:case 140:case 141:case 142:case 143:case 144:this.$=s[o];break;case 7:this.$={type:"assignment",name:s[o-2],value:s[o]};break;case 8:this.$={type:"def",name:s[o-2],value:s[o]};break;case 11:this.$={type:"sequence",steps:s[o]};break;case 17:this.$={type:"map",value:[s[o-3],s[o-1]]};break;case 18:this.$={type:"patterns",patterns:s[o-1]};break;case 19:this.$={type:"sequences",sequences:s[o-1]};break;case 21:this.$={type:"and",left:s[o-2],right:s[o]};break;case 22:this.$={type:"or",left:s[o-2],right:s[o]};break;case 24:this.$={type:"less_than",left:s[o-2],right:s[o]};break;case 25:this.$={type:"less_equal",left:s[o-2],right:s[o]};break;case 26:this.$={type:"equal",left:s[o-2],right:s[o]};break;case 27:this.$={type:"not_equal",left:s[o-2],right:s[o]};break;case 28:this.$={type:"greater_equal",left:s[o-2],right:s[o]};break;case 29:this.$={type:"greater_than",left:s[o-2],right:s[o]};break;case 31:this.$={type:"add",left:s[o-2],right:s[o]};break;case 32:this.$={type:"subtract",left:s[o-2],right:s[o]};break;case 33:this.$={type:"multiply",left:s[o-2],right:s[o]};break;case 34:this.$={type:"divide",left:s[o-2],right:s[o]};break;case 35:this.$={type:"modulus",left:s[o-2],right:s[o]};break;case 36:this.$={type:"power",left:s[o-2],right:s[o]};break;case 37:this.$={type:"invoke",name:s[o-2],args:[]};break;case 38:this.$={type:"invoke",name:s[o-3],args:s[o-1]};break;case 41:this.$={type:"not",value:s[o]};break;case 43:this.$={type:"get-property",left:s[o-2],right:s[o]};break;case 44:this.$={type:"get-index",left:s[o-2],right:s[o]};break;case 45:this.$={type:"get-index",left:s[o-3],right:s[o-1]};break;case 46:this.$={type:"boolean",value:s[o]};break;case 47:this.$={type:"boolean",value:null};break;case 48:this.$={type:"number",value:s[o]};break;case 49:this.$={type:"string",value:s[o]};break;case 50:this.$={type:"undefined",value:void 0};break;case 51:this.$={type:"get-value",name:s[o]};break;case 52:this.$={type:"get-structure"};break;case 55:this.$=s[o-1];break;case 56:this.$={type:"array",value:[]};break;case 57:this.$={type:"array",value:s[o-1]};break;case 62:this.$={type:"object",value:[]};break;case 63:this.$={type:"object",value:s[o-1]};break;case 66:this.$={type:"property",name:s[o-2],value:s[o]};break;case 67:this.$={type:"property",name:s[o],value:null};break;case 72:this.$={type:"spread",expression:s[o]};break;case 75:case 98:s[o].assignTo=null,this.$=s[o];break;case 76:case 99:case 113:s[o-2].assignTo=s[o],this.$=s[o-2];break;case 77:this.$={type:"pattern",patternType:"any",value:null};break;case 78:this.$={type:"pattern",patternType:"array",value:null};break;case 79:this.$={type:"pattern",patternType:"boolean",value:null};break;case 80:this.$={type:"pattern",patternType:"boolean",value:!0};break;case 81:this.$={type:"pattern",patternType:"boolean",value:!1};break;case 82:this.$={type:"pattern",patternType:"null",value:null};break;case 83:this.$={type:"pattern",patternType:"number",value:null};break;case 84:this.$={type:"pattern",patternType:"number",value:s[o]};break;case 85:this.$={type:"pattern",patternType:"object",value:null};break;case 86:this.$={type:"pattern",patternType:"string",value:null};break;case 87:this.$={type:"pattern",patternType:"string",value:s[o]};break;case 88:this.$={type:"pattern",patternType:"undefined",value:null};break;case 89:case 90:this.$=s[o];break;case 91:this.$={type:"pattern-reference",name:s[o]};break;case 92:this.$={type:"enumeration-reference",name:s[o]};break;case 93:this.$={type:"pattern",patternType:"reference",value:s[o]};break;case 94:this.$={type:"pattern",patternType:"array-pattern",value:[]};break;case 95:this.$={type:"pattern",patternType:"array-pattern",value:s[o-1]};break;case 100:this.$={type:"element",pattern:s[o],range:{type:"range",start:1,stop:1}};break;case 101:this.$={type:"element",pattern:s[o-2],range:s[o]};break;case 102:this.$={type:"element-group",elements:s[o-1],range:{type:"range",start:1,stop:1}};break;case 103:this.$={type:"element-group",elements:s[o-3],range:s[o]};break;case 104:this.$={type:"range",start:s[o-2],stop:s[o]};break;case 105:this.$={type:"range",start:0,stop:s[o]};break;case 106:this.$={type:"range",start:s[o-1],stop:1/0};break;case 107:this.$={type:"range",start:s[o],stop:s[o]};break;case 108:this.$={type:"pattern",patternType:"object",value:null};break;case 109:this.$={type:"pattern",patternType:"object-pattern",value:s[o-1]};break;case 114:this.$={type:"property",name:s[o-2],pattern:s[o]};break;case 115:this.$={type:"property",name:s[o],pattern:{type:"pattern",patternType:"any",value:null}};break;case 116:this.$=!0;break;case 117:this.$=!1;break;case 118:this.$=s[o].substring(1,s[o].length-1);break;case 119:this.$=parseInt(s[o]);break;case 120:this.$=parseFloat(s[o])}},table:[{3:1,4:2,6:3,7:4,8:5,9:t,10:n,12:r,15:8,17:9,18:a,20:11,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{1:[3]},{1:[2,1],5:[1,39]},e(b,[2,4]),e(b,[2,5]),e(b,[2,6]),{10:[1,40]},{10:[1,41]},e([1,5,14,24,28,56],[2,11],{16:[1,42]}),e(g,[2,13]),{10:w,19:43,26:k,55:E,58:P,59:52,60:55,61:A,72:44,74:M,75:S,76:R,77:_,78:I,79:T,80:N,81:X,82:57,83:58,84:Y,85:C,94:m,95:d},e(g,[2,15]),e(L,[2,16]),{23:[1,64]},{26:[1,65]},{26:[1,66]},e(L,[2,20],{31:[1,67],32:[1,68],34:$,35:D,36:z,37:B,38:O,39:q}),e(j,[2,23],{41:U,42:V,43:F,44:G,45:Q,46:H}),e(Z,[2,30]),e(W,J,{23:[1,81]}),e(Z,[2,39]),e(Z,[2,40],{52:[1,82],55:[1,83]}),{10:[1,85],23:i,26:u,48:84,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},e(W,[2,42]),e(W,[2,46]),e(W,[2,47]),e(W,[2,48]),e(W,[2,49]),e(W,[2,50]),e(W,[2,52]),e(W,[2,53]),e(W,[2,54]),{10:n,20:86,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},e(W,[2,116]),e(W,[2,117]),e(K,[2,120]),e(K,[2,118]),{7:91,9:t,10:n,12:r,20:90,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,56:[1,87],57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,65:88,66:89,77:x,78:v,94:m,95:d},{7:96,9:t,10:n,12:r,20:95,21:12,22:s,23:i,25:o,26:u,28:[1,92],29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,67:93,68:94,77:x,78:v,94:m,95:d},{1:[2,2],6:97,7:4,8:5,9:t,10:n,12:r,15:8,17:9,18:a,20:11,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{11:[1,98]},{11:[1,99]},{10:n,17:100,18:a,20:11,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},e(g,[2,14]),e(g,[2,75],{73:[1,101]}),e(ee,[2,77]),e(ee,[2,78]),e(ee,[2,79]),e(ee,[2,80]),e(ee,[2,81]),e(ee,[2,82]),e(ee,[2,83]),e(ee,[2,84]),e(ee,[2,85]),e(ee,[2,86]),e(ee,[2,87]),e(ee,[2,88]),e(ee,[2,89]),e(ee,[2,90]),{10:[1,102]},{10:[1,103]},e(ee,[2,93]),{10:w,23:te,26:k,55:E,56:[1,104],58:P,59:52,60:55,61:A,72:108,74:M,75:S,76:R,77:_,78:I,79:T,80:N,81:X,82:57,83:58,84:Y,85:C,86:105,87:106,88:107,94:m,95:d},{9:ne,10:re,12:ae,22:se,25:ie,28:[1,110],29:oe,31:ue,32:le,45:ce,46:he,50:ye,53:114,58:pe,60:116,61:fe,73:xe,74:ve,75:me,76:de,77:be,78:ge,79:we,80:ke,81:Ee,85:Pe,91:111,92:112,93:113,94:m},{10:n,20:139,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:w,19:141,26:k,27:140,55:E,58:P,59:52,60:55,61:A,72:44,74:M,75:S,76:R,77:_,78:I,79:T,80:N,81:X,82:57,83:58,84:Y,85:C,94:m,95:d},{8:143,10:n,13:142,15:8,17:9,18:a,20:11,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,30:144,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,30:145,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,33:146,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,33:147,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,33:148,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,33:149,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,33:150,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,33:151,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,40:152,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,40:153,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,40:154,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,40:155,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,40:156,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,23:i,26:u,40:157,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{10:n,20:161,21:12,22:s,23:i,24:[1,158],25:o,26:u,29:l,30:16,33:17,40:18,47:159,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,70:160,71:Ae,77:x,78:v,94:m,95:d},{9:ne,10:re,12:ae,22:se,25:ie,29:oe,31:ue,32:le,45:ce,46:he,50:ye,53:163,54:164,58:pe,60:116,61:fe,73:xe,74:ve,75:me,76:de,77:be,78:ge,79:we,80:ke,81:Ee,85:Pe,94:m,95:Me},{54:166,95:Me},e(Z,[2,41]),e(W,J),{24:[1,167]},e(W,[2,56]),{14:[1,169],56:[1,168]},e(Se,[2,59]),e(Se,[2,60]),e(Se,[2,61]),e(W,[2,62]),{14:[1,171],28:[1,170]},e(Re,[2,65]),e(Re,[2,67],{69:[1,172]}),e(Re,[2,68]),e(b,[2,3]),{8:173,10:n,15:8,17:9,18:a,20:11,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},{8:174,10:n,15:8,17:9,18:a,20:11,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},e(g,[2,12]),{10:[1,175]},e(ee,[2,91]),e(ee,[2,92]),e(ee,[2,94]),{14:_e,56:[1,176]},e(Ie,[2,97]),e(Ie,[2,98],{73:[1,178]}),e(Te,[2,100],{5:[1,179]}),{10:w,23:te,26:k,55:E,58:P,59:52,60:55,61:A,72:108,74:M,75:S,76:R,77:_,78:I,79:T,80:N,81:X,82:57,83:58,84:Y,85:C,86:180,87:106,88:107,94:m,95:d},e(ee,[2,108]),{14:[1,182],28:[1,181]},e(Re,[2,111]),e(Re,[2,112],{73:[1,183]}),e(Ne,[2,115],{69:[1,184]}),e(K,[2,121]),e(K,[2,122]),e(K,[2,123]),e(K,[2,124]),e(K,[2,125]),e(K,[2,126]),e(K,[2,127]),e(K,[2,128]),e(K,[2,129]),e(K,[2,130]),e(K,[2,131]),e(K,[2,132]),e(K,[2,133]),e(K,[2,134]),e(K,[2,135]),e(K,[2,136]),e(K,[2,137]),e(K,[2,138]),e(K,[2,139]),e(K,[2,140]),e(K,[2,141]),e(K,[2,142]),e(K,[2,143]),e(K,[2,144]),{14:[1,185]},{14:[1,187],28:[1,186]},e(Re,[2,74]),{14:[1,189],28:[1,188]},e(Re,[2,10]),e(L,[2,21],{34:$,35:D,36:z,37:B,38:O,39:q}),e(L,[2,22],{34:$,35:D,36:z,37:B,38:O,39:q}),e(j,[2,24],{41:U,42:V,43:F,44:G,45:Q,46:H}),e(j,[2,25],{41:U,42:V,43:F,44:G,45:Q,46:H}),e(j,[2,26],{41:U,42:V,43:F,44:G,45:Q,46:H}),e(j,[2,27],{41:U,42:V,43:F,44:G,45:Q,46:H}),e(j,[2,28],{41:U,42:V,43:F,44:G,45:Q,46:H}),e(j,[2,29],{41:U,42:V,43:F,44:G,45:Q,46:H}),e(Z,[2,31]),e(Z,[2,32]),e(Z,[2,33]),e(Z,[2,34]),e(Z,[2,35]),e(Z,[2,36]),e(Z,[2,37]),{14:[1,191],24:[1,190]},e(Xe,[2,70]),e(Xe,[2,71]),{10:n,20:192,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},e(W,[2,43]),e(W,[2,44]),e([1,5,14,16,24,28,31,32,34,35,36,37,38,39,41,42,43,44,45,46,52,55,56,69,73,90],[2,119]),{56:[1,193]},e(W,[2,55]),e(W,[2,57]),{7:91,9:t,10:n,12:r,20:90,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,66:194,77:x,78:v,94:m,95:d},e(W,[2,63]),{7:96,9:t,10:n,12:r,20:95,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,68:195,77:x,78:v,94:m,95:d},{8:196,10:n,15:8,17:9,18:a,20:11,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},e(Ye,[2,7]),e(Ye,[2,8]),e(g,[2,76]),e(ee,[2,95]),{10:w,23:te,26:k,55:E,58:P,59:52,60:55,61:A,72:108,74:M,75:S,76:R,77:_,78:I,79:T,80:N,81:X,82:57,83:58,84:Y,85:C,87:197,88:107,94:m,95:d},{10:[1,198]},{54:200,89:199,90:Ce,95:Me},{14:_e,24:[1,202]},e(ee,[2,109]),{9:ne,10:re,12:ae,22:se,25:ie,29:oe,31:ue,32:le,45:ce,46:he,50:ye,53:114,58:pe,60:116,61:fe,73:xe,74:ve,75:me,76:de,77:be,78:ge,79:we,80:ke,81:Ee,85:Pe,92:203,93:113,94:m},{10:[1,204]},{10:w,26:k,55:E,58:P,59:52,60:55,61:A,72:205,74:M,75:S,76:R,77:_,78:I,79:T,80:N,81:X,82:57,83:58,84:Y,85:C,94:m,95:d},{8:206,10:n,15:8,17:9,18:a,20:11,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},e(L,[2,18]),{10:w,19:207,26:k,55:E,58:P,59:52,60:55,61:A,72:44,74:M,75:S,76:R,77:_,78:I,79:T,80:N,81:X,82:57,83:58,84:Y,85:C,94:m,95:d},e(L,[2,19]),{8:208,10:n,15:8,17:9,18:a,20:11,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,77:x,78:v,94:m,95:d},e(Z,[2,38]),{10:n,20:161,21:12,22:s,23:i,25:o,26:u,29:l,30:16,33:17,40:18,48:20,49:21,50:c,51:23,55:h,57:24,58:y,59:26,60:27,61:p,62:f,63:30,64:31,70:209,71:Ae,77:x,78:v,94:m,95:d},e(Xe,[2,72]),e(W,[2,45]),e(Se,[2,58]),e(Re,[2,64]),e(Re,[2,66]),e(Ie,[2,96]),e(Ie,[2,99]),e(Te,[2,101]),e(Te,[2,107],{90:[1,210]}),{54:211,95:Me},e(Te,[2,102],{5:[1,212]}),e(Re,[2,110]),e(Re,[2,113]),e(Ne,[2,114]),{24:[1,213]},e(Re,[2,73]),e(Re,[2,9]),e(Xe,[2,69]),e(Te,[2,106],{54:214,95:Me}),e(Te,[2,105]),{54:200,89:215,90:Ce,95:Me},e(L,[2,17]),e(Te,[2,104]),e(Te,[2,103])],defaultActions:{},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],r=[null],a=[],s=this.table,i="",o=0,u=0,l=2,c=1,h=a.slice.call(arguments,1),y=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);y.setInput(e,p.yy),p.yy.lexer=y,p.yy.parser=this,void 0===y.yylloc&&(y.yylloc={});var x=y.yylloc;a.push(x);var v=y.options&&y.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,d,b,g,w,k,E,P,A,M=function(){var e;return"number"!=typeof(e=y.lex()||c)&&(e=t.symbols_[e]||e),e},S={};;){if(b=n[n.length-1],this.defaultActions[b]?g=this.defaultActions[b]:(null==m&&(m=M()),g=s[b]&&s[b][m]),void 0===g||!g.length||!g[0]){var R="";for(k in A=[],s[b])this.terminals_[k]&&k>l&&A.push("'"+this.terminals_[k]+"'");R=y.showPosition?"Parse error on line "+(o+1)+":\n"+y.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(o+1)+": Unexpected "+(m==c?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(R,{text:y.match,token:this.terminals_[m]||m,line:y.yylineno,loc:x,expected:A})}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(g[0]){case 1:n.push(m),r.push(y.yytext),a.push(y.yylloc),n.push(g[1]),m=null,d?(m=d,d=null):(u=y.yyleng,i=y.yytext,o=y.yylineno,x=y.yylloc);break;case 2:if(E=this.productions_[g[1]][1],S.$=r[r.length-E],S._$={first_line:a[a.length-(E||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(E||1)].first_column,last_column:a[a.length-1].last_column},v&&(S._$.range=[a[a.length-(E||1)].range[0],a[a.length-1].range[1]]),void 0!==(w=this.performAction.apply(S,[i,u,o,p.yy,g[1],r,a].concat(h))))return w;E&&(n=n.slice(0,-1*E*2),r=r.slice(0,-1*E),a=a.slice(0,-1*E)),n.push(this.productions_[g[1]][0]),r.push(S.$),a.push(S._$),P=s[n[n.length-2]][n[n.length-1]],n.push(P);break;case 3:return!0}}return!0}},$e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,a;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),(r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var s in a)this[s]=a[s];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((n=this._input.match(this.rules[a[s]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=s,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,a[s])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,a[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,r){switch(n){case 0:case 1:break;case 2:return 31;case 3:return 74;case 4:return 75;case 5:return 73;case 6:return 76;case 7:return 12;case 8:return 85;case 9:return 78;case 10:return 9;case 11:return 22;case 12:return 45;case 13:return 50;case 14:return 32;case 15:return 58;case 16:return 79;case 17:return 80;case 18:return 25;case 19:return 46;case 20:return 29;case 21:return 81;case 22:return 77;case 23:return 61;case 24:return 95;case 25:return 94;case 26:return 23;case 27:return 24;case 28:return 26;case 29:return 28;case 30:return 55;case 31:return 56;case 32:return 16;case 33:return"|";case 34:return 14;case 35:return 69;case 36:return 5;case 37:return 35;case 38:return 38;case 39:return 18;case 40:return 36;case 41:return 37;case 42:return 34;case 43:return 39;case 44:return 11;case 45:return 71;case 46:return 90;case 47:return 52;case 48:return"_";case 49:return 41;case 50:return 42;case 51:return 43;case 52:return 44;case 53:return 62;case 54:return 10}},rules:[/^(?:\s+)/,/^(?:\/\/.*)/,/^(?:and\b)/,/^(?:any\b)/,/^(?:array\b)/,/^(?:as\b)/,/^(?:boolean\b)/,/^(?:def\b)/,/^(?:enum\b)/,/^(?:false\b)/,/^(?:let\b)/,/^(?:map\b)/,/^(?:mod\b)/,/^(?:not\b)/,/^(?:or\b)/,/^(?:null\b)/,/^(?:number\b)/,/^(?:object\b)/,/^(?:patterns\b)/,/^(?:pow\b)/,/^(?:sequences\b)/,/^(?:string\b)/,/^(?:true\b)/,/^(?:undefined\b)/,/^(?:[-+]?(0|[1-9]\d*)(\.\d+)?)/,/^(?:"[^"\r\n]*")/,/^(?:\()/,/^(?:\))/,/^(?:{)/,/^(?:})/,/^(?:\[)/,/^(?:\])/,/^(?:\|>)/,/^(?:\|)/,/^(?:,)/,/^(?::)/,/^(?:;)/,/^(?:<=)/,/^(?:>=)/,/^(?:=~)/,/^(?:==)/,/^(?:!=)/,/^(?:<)/,/^(?:>)/,/^(?:=)/,/^(?:\.{3})/,/^(?:\.{2})/,/^(?:\.)/,/^(?:_)/,/^(?:\+)/,/^(?:-)/,/^(?:\*)/,/^(?:\/)/,/^(?:\$)/,/^(?:[a-zA-Z_][a-zA-Z0-9_]*)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54],inclusive:!0}}};function De(){this.yy={}}return Le.lexer=$e,De.prototype=Le,Le.Parser=De,new De}();function y(t){return null!==t&&"object"===e(t)}var p=Object.freeze({__proto__:null,typeName:function(t){switch(t){case null:return"null";case void 0:return"undefined";default:return Array.isArray(t)?"array":e(t)}},length:function(e){return Array.isArray(e)?e.length:0},zip:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=[];if(Array.isArray(e)&&e.length>0&&e.every((function(e){return Array.isArray(e)})))for(var r=Math.max.apply(Math,s(e.map((function(e){return e.length})))),a=0;a<r;a++){var i=[],o=!0,u=!1,l=void 0;try{for(var c,h=e[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var y=c.value;i.push(a<y.length?y[a]:t)}}catch(e){u=!0,l=e}finally{try{o||null==h.return||h.return()}finally{if(u)throw l}}n.push(i)}return n},partition:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=e.length,s=[];n=void 0===n?t:n,t=Math.max(1,t),n=Math.max(1,n);for(var i=0;i<a;i+=n){for(var o=[],u=i,l=0;l<t;l++,u++)o.push(u<a?e[u]:r);s.push(o)}return s},reverse:function(e){return Array.isArray(e)?e.slice().reverse():void 0},sort:function(e,t){return Array.isArray(e)?e.slice().sort(t):void 0},join:function(e,t){return e.join(t)},keys:function(e){return y(e)?Object.keys(e):[]},values:function(e){return y(e)?Object.values(e):[]},pairs:function(e){return y(e)?Object.entries(e):[]},fromPairs:function(e){var t={};if(Array.isArray(e)){var n=!0,r=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;if(u.length>=2){var l=a(u,2),c=l[0],h=l[1];t[c]=h}}}catch(e){r=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}}return t},merge:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return t.length>0&&Array.isArray(t[0])?(r=t[0]).concat.apply(r,s(t.slice(1))):t.every((function(e){return y(e)}))?Object.assign.apply(Object,[{}].concat(t)):void 0}}),f={};function x(t){return null!==t&&"object"===e(t)}var v=function(){function n(){for(var e in t(this,n),this.symbolTable={},this.functions={},this.messages=[],this.verbose=!1,p)this.functions[e]=p[e]}return r(n,[{key:"addFunction",value:function(e,t){this.functions[e]=t}},{key:"addInfo",value:function(e){this.verbose&&this.messages.push({type:"message",level:"info",message:e})}},{key:"addWarning",value:function(e){this.messages.push({type:"message",level:"warning",message:e})}},{key:"addError",value:function(e){this.messages.push({type:"message",level:"error",message:e})}},{key:"execute",value:function(e,t){var n,r=h.parse(e);this.messages=[];var a=!0,s=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var l=o.value;switch(l.type){case"assignment":case"def":case"sequence":if((n=this.executeExpression(l,t,this.symbolTable))===f)return f;break;default:return this.addError("unknown statement type: ".concat(l.type)),f}}}catch(e){s=!0,i=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw i}}return n}},{key:"executeExpression",value:function(t,n,r){var s=this,i=function(a,i){var o=s.executeExpression(t.left,n,r);if(o!==f&&e(o)===a){var u=s.executeExpression(t.right,n,r);if(u!==f&&e(u)===a)return i(o,u)}return f};switch(t.type){case"assignment":var o=this.executeExpression(t.value,n,r);return o===f?(this.addError("Unable to evaluate assignment value for ".concat(t.name)),f):r.hasOwnProperty(t.name)?(this.addError("A symbol in current scope was assigned more than once: ".concat(t.name)),f):(r[t.name]=o,o);case"def":return void(r[t.name]=t.value);case"get-value":if(t.name in r){var u=r[t.name];if(x(u)&&"sequence"===u.type){var l=this.executeExpression(u,n,r);return l===f?(this.addError("Unable to evaluate sequence ".concat(t.name)),f):l}return u}return t.name in this.functions?this.invokeFunction(t.name,[n]):(this.addError("Tried to access unbound symbol: ".concat(t.name)),f);case"get-property":var c=this.executeExpression(t.left,n,r);return x(c)?c[t.right]:f;case"get-index":var h=t.left,y=t.right,p=this.executeExpression(h,n,r);if(Array.isArray(p)){var v=y<0?p.length+y:y;return 0<=v&&v<p.length?p[v]:f}return f;case"get-structure":return n;case"sequences":var m=f,d=!0,b=!1,g=void 0;try{for(var w,k=t.sequences[Symbol.iterator]();!(d=(w=k.next()).done);d=!0){var E=w.value,P=Object.create(r);if((m=this.executeExpression(E,n,P))!==f){Object.assign(r,P);break}}}catch(e){b=!0,g=e}finally{try{d||null==k.return||k.return()}finally{if(b)throw g}}return m;case"sequence":var A=n,M=!0,S=!1,R=void 0;try{for(var _,I=t.steps[Symbol.iterator]();!(M=(_=I.next()).done);M=!0){var T=_.value;if((A="pattern"===T.type?this.executePattern(T,A,r):this.executeExpression(T,A,r))===f)return f}}catch(e){S=!0,R=e}finally{try{M||null==I.return||I.return()}finally{if(S)throw R}}return A;case"map":var N=a(t.value,2),X=N[0],Y=N[1],C=this.executeExpression(X,n,r);if(C!==f){if(!1===Array.isArray(C))return this.addError("First argument of map must evaluate to an array"),f;var L=Object.create(r);return C.map((function(e){return s.executeExpression(Y,e,L)}))}return f;case"patterns":var $=f,D=!0,z=!1,B=void 0;try{for(var O,q=t.patterns[Symbol.iterator]();!(D=(O=q.next()).done);D=!0){var j=O.value,U=Object.create(r);if(($=this.executePattern(j,n,U))!==f){Object.assign(r,U);break}}}catch(e){z=!0,B=e}finally{try{D||null==q.return||q.return()}finally{if(z)throw B}}return $;case"and":return i("boolean",(function(e,t){return e&&t}));case"or":return i("boolean",(function(e,t){return e||t}));case"not":var V=this.executeExpression(t.value,n,r);return V!==f&&"boolean"==typeof V?!V:f;case"less_than":return i("number",(function(e,t){return e<t}));case"less_equal":return i("number",(function(e,t){return e<=t}));case"equal":return i("number",(function(e,t){return e===t}));case"not_equal":return i("number",(function(e,t){return e!==t}));case"greater_equal":return i("number",(function(e,t){return e>=t}));case"greater_than":return i("number",(function(e,t){return e>t}));case"add":return i("number",(function(e,t){return e+t}));case"subtract":return i("number",(function(e,t){return e-t}));case"multiply":return i("number",(function(e,t){return e*t}));case"divide":return i("number",(function(e,t){return e/t}));case"modulus":return i("number",(function(e,t){return e%t}));case"power":return i("number",(function(e,t){return Math.pow(e,t)}));case"invoke":var F=t.args.reduce((function(e,t){if("spread"===t.type){var a=s.executeExpression(t.expression,n,r);Array.isArray(a)?e=e.concat(a):e.push(a)}else e.push(s.executeExpression(t,n,r));return e}),[]);return t.name in this.functions?this.invokeFunction(t.name,F):(this.addError("Tried to access unbound symbol: ".concat(t.name)),f);case"array":var G=[],Q=!0,H=!1,Z=void 0;try{for(var W,J=t.value[Symbol.iterator]();!(Q=(W=J.next()).done);Q=!0){var K=W.value;if("assignment"===K.type)this.executeExpression(K,n,r);else{var ee=this.executeExpression(K,n,r);if(ee===f)return f;G.push(ee)}}}catch(e){H=!0,Z=e}finally{try{Q||null==J.return||J.return()}finally{if(H)throw Z}}return G;case"boolean":case"null":case"number":case"string":case"undefined":return t.value;case"object":return this.executeObjectExpression(t,n,r);default:return this.addError("Unrecognized expression type: '".concat(t.type,"'")),f}}},{key:"executeObjectExpression",value:function(e,t,n){var r=Object.create(n),a={},s=!0,i=!1,o=void 0;try{for(var u,l=e.value[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value;switch(c.type){case"property":var h=this.executeExpression(c.name,t,r);if(h===f)return f;if("string"!=typeof h)return this.addError("Property names must be string types: ".concat(h)),f;var y=null!==c.value?this.executeExpression(c.value,t,r):n[h];if(y===f)return this.addError("Unable to evaluate value for property ".concat(h)),f;a[h]=y;break;case"assignment":if(this.executeExpression(c,t,r)===f)return f;break;default:return this.addError("Unrecognized object expression element type: ".concat(c.type)),f}}}catch(e){i=!0,o=e}finally{try{s||null==l.return||l.return()}finally{if(i)throw o}}return a}},{key:"executePattern",value:function(e,t,n){switch(e.patternType){case"any":return this.assign(n,e.assignTo,t),t;case"array":return Array.isArray(t)?(this.assign(n,e.assignTo,t),t):f;case"array-pattern":return this.executeArrayPattern(e,t,n)===f?f:n;case"boolean":return"boolean"!=typeof t||null!==e.value&&e.value!==t?f:(this.assign(n,e.assignTo,t),t);case"null":return null===t?(this.assign(n,e.assignTo,t),t):f;case"number":return"number"!=typeof t||null!==e.value&&e.value!==t?f:(this.assign(n,e.assignTo,t),t);case"object":return x(t)?(this.assign(n,e.assignTo,t),t):f;case"object-pattern":if(!1===x(t))return f;var r={},a=!0,s=!1,i=void 0;try{for(var o,u=e.value[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var l=o.value,c=l.name,h=l.pattern,y=l.assignTo;if(!(c in t))return f;var p=this.executePattern(h,t[c],n);if(p===f)return f;this.assign(n,y,t[c]),this.assign(r,y,p)}}catch(e){s=!0,i=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw i}}return this.assign(n,e.assignTo,t),r;case"reference":if(e.value in this.patterns){var v=this.patterns[e.value],m=this.executePattern(v,t,n);return m!==f&&this.assign(n,e.assignTo,m),m}return f;case"string":return"string"!=typeof t||null!==e.value&&e.value!==t?f:(this.assign(n,e.assignTo,t),t);case"undefined":return void 0===t?(this.assign(n,e.assignTo,t),t):f;default:throw new TypeError("unrecognized pattern type: '".concat(e.type,"'"))}}},{key:"executeArrayPattern",value:function(e,t,n){if(!1===Array.isArray(t))return f;var r=[],a=0,s=!0,i=!1,o=void 0;try{for(var u,l=e.value[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value,h=this.executeArrayPatternElement(c,a,t,n);if(h===f)return f;r=r.concat(h),a+=h.length}}catch(e){i=!0,o=e}finally{try{s||null==l.return||l.return()}finally{if(i)throw o}}return a===t.length?(this.assign(n,e.assignTo,t),r):f}},{key:"executeArrayPatternElement",value:function(e,t,n,r){var a=[];switch(e.type){case"element":var s=this.executeArrayElementPattern(e,t,n,r);if(s===f)return f;a=a.concat(s),t+=s.length;break;case"element-group":var i=this.executeArrayElementGroupPattern(e,t,n,r);if(i===f)return f;a=a.concat(i),t+=i.length;break;default:return this.addError("Unrecognized array pattern element type: '".concat(e.type,"'")),f}return a}},{key:"executeArrayElementPattern",value:function(e,t,n,r){for(var a=e.pattern,s=e.range,i=s.start,o=s.stop,u=[],l=0;l<o;l++){var c=t+l,h=c<n.length?this.executePattern(a,n[c],r):f;if(h===f){if(l>=i)break;return f}o>1?this.pushAssign(r,e.assignTo,h):this.assign(r,e.assignTo,h),u.push(h)}return u}},{key:"executeArrayElementGroupPattern",value:function(e,t,n,r){for(var a=e.elements,s=e.range,i=s.start,o=s.stop,u=[],l=0;l<o;l++){var c=[],h=!0,y=!1,p=void 0;try{for(var x,v=a[Symbol.iterator]();!(h=(x=v.next()).done);h=!0){var m=x.value,d=Object.create(r),b=this.executeArrayPatternElement(m,t,n,d);if(b===f){c=f;break}null!==m.assignTo&&void 0!==m.assignTo&&m.assignTo in d&&(o>1?this.pushAssign(r,m.assignTo,d[m.assignTo]):this.assign(r,m.assignTo,d[m.assignTo])),u=u.concat(b),t+=b.length,c=c.concat(b)}}catch(e){y=!0,p=e}finally{try{h||null==v.return||v.return()}finally{if(y)throw p}}if(c===f){if(l>=i){if(0===l){this.assign(r,e.assignTo,[]);var g=!0,w=!1,k=void 0;try{for(var E,P=a[Symbol.iterator]();!(g=(E=P.next()).done);g=!0){var A=E.value;this.assign(r,A.assignTo,[])}}catch(e){w=!0,k=e}finally{try{g||null==P.return||P.return()}finally{if(w)throw k}}}return u}return f}o>1?this.pushAssign(r,e.assignTo,c):this.assign(r,e.assignTo,c)}return u}},{key:"invokeFunction",value:function(e,t){var n;return e in this.functions?(n=this.functions)[e].apply(n,s(t)):f}},{key:"assign",value:function(e,t,n){null!=t&&(e.hasOwnProperty(t)&&this.addWarning("Overwriting ".concat(t," with value: ").concat(n)),e[t]=n)}},{key:"pushAssign",value:function(e,t,n){if(null!=t){var r=e.hasOwnProperty(t)?e[t]:[];Array.isArray(r)?(r.push(n),e[t]=r):this.addWarning("Unable to push to ".concat(t," because it is not an array: ").concat(r))}}}]),n}(),m=function(){function e(n,r){t(this,e),this.type=n,this.text=r}return r(e,[{key:"typeis",value:function(e){return this.type===e}}]),e}();m.UNDEFINED=0,m.COMMAND=1,m.NUMBER=2,m.EOD=3;var d=function(){function e(n){t(this,e),null==n&&(n=""),this.setPathData(n)}return r(e,[{key:"setPathData",value:function(e){if("string"!=typeof e)throw new TypeError("The first parameter must be a string");this._pathData=e}},{key:"getNextToken",value:function(){for(var e=null,t=this._pathData;null===e;)if(null===t||""===t)e=new m(m.EOD,"");else if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([AaCcHhLlMmQqSsTtVvZz])/))e=new m(m.COMMAND,RegExp.$1),t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?\d+(\.\d*)?|[-+]?\.\d+)([eE][-+]?\d+)?)/))throw new SyntaxError("Unrecognized path data: ".concat(t));e=new m(m.NUMBER,RegExp.$1),t=t.substr(RegExp.$1.length)}return this._pathData=t,e}}]),e}(),b=function(){function e(){t(this,e),this._lexer=new d,this._handler=null}return r(e,[{key:"parseData",value:function(t){if("string"!=typeof t)throw new TypeError("The first parameter must be a string: ".concat(t));null!==this._handler&&"function"==typeof this._handler.beginParse&&this._handler.beginParse();var n=this._lexer;n.setPathData(t);for(var r="BOP",a=null,s=n.getNextToken();!1===s.typeis(m.EOD);){var i=void 0,o=[];switch(s.type){case m.COMMAND:if("BOP"===r&&"M"!==s.text&&"m"!==s.text)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(s.text,"'"));r=s.text,i=e.PARAMCOUNT[s.text.toUpperCase()],s=n.getNextToken();break;case m.NUMBER:if("BOP"===r)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(s.text,"'"));i=e.PARAMCOUNT[r.toUpperCase()];break;default:throw new SyntaxError("Unrecognized command type: ".concat(s.type))}for(var u=0;u<i;u++){switch(s.type){case m.COMMAND:throw new SyntaxError("Parameter must be a number. Found '".concat(s.text,"'"));case m.NUMBER:o[u]=parseFloat(s.text);break;case m.EOD:throw new SyntaxError("Unexpected end of string");default:throw new SyntaxError("Unrecognized parameter type. Found type '".concat(s.type,"'"))}s=n.getNextToken()}if(null!==this._handler){var l=this._handler,c=e.METHODNAME[r];"a"!==r&&"A"!==r||(o[3]=0!==o[3],o[4]=0!==o[4]),null!==l&&"function"==typeof l[c]&&l[c].apply(l,o)}switch(r){case"M":r="L";break;case"m":r="l";break;case"Z":case"z":r="BOP"}if(s===a)throw new SyntaxError("Parser stalled on '".concat(s.text,"'"));a=s}null!==this._handler&&"function"==typeof this._handler.endParse&&this._handler.endParse()}},{key:"setHandler",value:function(e){this._handler=e}}]),e}();b.PARAMCOUNT={A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},b.METHODNAME={A:"arcAbs",a:"arcRel",C:"curvetoCubicAbs",c:"curvetoCubicRel",H:"linetoHorizontalAbs",h:"linetoHorizontalRel",L:"linetoAbs",l:"linetoRel",M:"movetoAbs",m:"movetoRel",Q:"curvetoQuadraticAbs",q:"curvetoQuadraticRel",S:"curvetoCubicSmoothAbs",s:"curvetoCubicSmoothRel",T:"curvetoQuadraticSmoothAbs",t:"curvetoQuadraticSmoothRel",V:"linetoVerticalAbs",v:"linetoVerticalRel",Z:"closePath",z:"closePath"};var g=2*Math.PI;function w(e,t,n,r,a,s,i){a=a*Math.PI/180;var u=Math.cos(a),l=Math.sin(a),c=e.subtract(t).multiply(.5),h=c.x*u+c.y*l,y=c.x*-l+c.y*u,p=h*h,f=y*y,x=p/((n=Math.abs(n))*n)+f/((r=Math.abs(r))*r);if(x>1){var v=Math.sqrt(x);n*=v,r*=v}var m=n*n,d=r*r,b=m*f,w=d*p,k=(m*d-b-w)/(b+w);Math.abs(k)<1e-6&&(k=0);var E=Math.sqrt(k);s===i&&(E=-E);var P,A,M=e.add(t).multiply(.5),S=E*n*y/r,R=E*-r*h/n,_=(h-S)/n,I=(h+S)/n,T=(y-R)/r,N=(y+R)/r,X=new o(1,0).angleBetween(new o(_,T)),Y=(P=new o(_,T).angleBetween(new o(-I,-N)),(A=P%g)<0?A+g:A);return!1===i&&(Y-=g),[S*u-R*l+M.x,S*l+R*u+M.y,n,r,X,X+Y]}var k=function(){function e(n){t(this,e),this.shapeCreator=n,this.shapes=[],this.firstX=null,this.firstY=null,this.lastX=null,this.lastY=null,this.lastCommand=null}return r(e,[{key:"beginParse",value:function(){this.shapes=[],this.firstX=null,this.firstY=null,this.lastX=null,this.lastY=null,this.lastCommand=null}},{key:"addShape",value:function(e){this.shapes.push(e)}},{key:"arcAbs",value:function(e,t,n,r,a,o,u){if(0===e||0===t)this.addShape(this.shapeCreator.line(this.lastX,this.lastY,o,u));else{var l,c=w(new i(this.lastX,this.lastY),new i(o,u),e,t,n,r,a);this.addShape((l=this.shapeCreator).arc.apply(l,s(c)))}this.lastCommand="A",this.lastX=o,this.lastY=u}},{key:"arcRel",value:function(e,t,n,r,a,o,u){if(0===e||0===t)this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX+o,this.lastY+u));else{var l,c=w(new i(this.lastX,this.lastY),new i(this.lastX+o,this.lastY+u),e,t,n,r,a);this.addShape((l=this.shapeCreator).arc.apply(l,s(c)))}this.lastCommand="a",this.lastX+=o,this.lastY+=u}},{key:"curvetoCubicAbs",value:function(e,t,n,r,a,s){this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,e,t,n,r,a,s)),this.lastX=a,this.lastY=s,this.lastCommand="C"}},{key:"curvetoCubicRel",value:function(e,t,n,r,a,s){this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,this.lastX+e,this.lastY+t,this.lastX+n,this.lastY+r,this.lastX+a,this.lastY+s)),this.lastX+=a,this.lastY+=s,this.lastCommand="c"}},{key:"linetoHorizontalAbs",value:function(e){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,e,this.lastY)),this.lastX=e,this.lastCommand="H"}},{key:"linetoHorizontalRel",value:function(e){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX+e,this.lastY)),this.lastX+=e,this.lastCommand="h"}},{key:"linetoAbs",value:function(e,t){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,e,t)),this.lastX=e,this.lastY=t,this.lastCommand="L"}},{key:"linetoRel",value:function(e,t){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX+e,this.lastY+t)),this.lastX+=e,this.lastY+=t,this.lastCommand="l"}},{key:"movetoAbs",value:function(e,t){this.firstX=e,this.firstY=t,this.lastX=e,this.lastY=t,this.lastCommand="M"}},{key:"movetoRel",value:function(e,t){this.firstX+=e,this.firstY+=t,this.lastX+=e,this.lastY+=t,this.lastCommand="m"}},{key:"curvetoQuadraticAbs",value:function(e,t,n,r){this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,e,t,n,r)),this.lastX=n,this.lastY=r,this.lastCommand="Q"}},{key:"curvetoQuadraticRel",value:function(e,t,n,r){this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,this.lastX+e,this.lastY+t,this.lastX+n,this.lastY+r)),this.lastX+=n,this.lastY+=r,this.lastCommand="q"}},{key:"curvetoCubicSmoothAbs",value:function(e,t,n,r){var a,s;if(this.lastCommand.match(/^[SsCc]$/)){var i=this.shapes[this.shapes.length-1].args[2];a=2*this.lastX-i.x,s=2*this.lastY-i.y}else a=this.lastX,s=this.lastY;this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,a,s,e,t,n,r)),this.lastX=n,this.lastY=r,this.lastCommand="S"}},{key:"curvetoCubicSmoothRel",value:function(e,t,n,r){var a,s;if(this.lastCommand.match(/^[SsCc]$/)){var i=this.shapes[this.shapes.length-1].args[2];a=2*this.lastX-i.x,s=2*this.lastY-i.y}else a=this.lastX,s=this.lastY;this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,a,s,this.lastX+e,this.lastY+t,this.lastX+n,this.lastY+r)),this.lastX+=n,this.lastY+=r,this.lastCommand="s"}},{key:"curvetoQuadraticSmoothAbs",value:function(e,t){var n,r;if(this.lastCommand.match(/^[QqTt]$/)){var a=this.shapes[this.shapes.length-1].args[1];n=2*this.lastX-a.x,r=2*this.lastY-a.y}else n=this.lastX,r=this.lastY;this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,n,r,e,t)),this.lastX=e,this.lastY=t,this.lastCommand="T"}},{key:"curvetoQuadraticSmoothRel",value:function(e,t){var n,r;if(this.lastCommand.match(/^[QqTt]$/)){var a=this.shapes[this.shapes.length-1].args[1];n=2*this.lastX-a.x,r=2*this.lastY-a.y}else n=this.lastX,r=this.lastY;this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,n,r,this.lastX+e,this.lastY+t)),this.lastX+=e,this.lastY+=t,this.lastCommand="t"}},{key:"linetoVerticalAbs",value:function(e){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX,e)),this.lastY=e,this.lastCommand="V"}},{key:"linetoVerticalRel",value:function(e){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX,this.lastY+e)),this.lastY+=e,this.lastCommand="v"}},{key:"closePath",value:function(){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.firstX,this.firstY)),this.lastX=this.firstX,this.lastY=this.firstY,this.lastCommand="z"}}]),e}(),E=.5*Math.PI,P=function(){function e(n,r){t(this,e),this.name=n,this.args=r}return r(e,null,[{key:"arc",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A(e.ARC,n,["center","radiusX","radiusY","startRadians","endRadians"])}},{key:"quadraticBezier",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A(e.QUADRATIC_BEZIER,n,["p1","p2","p3"])}},{key:"cubicBezier",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A(e.CUBIC_BEZIER,n,["p1","p2","p3","p4"])}},{key:"circle",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A(e.CIRCLE,n,["center","radius"])}},{key:"ellipse",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A(e.ELLIPSE,n,["center","radiusX","radiusY"])}},{key:"line",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A(e.LINE,n,["p1","p2"])}},{key:"path",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A(e.PATH,n,["segments"])}},{key:"polygon",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A(e.POLYGON,n,["points"])}},{key:"polyline",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A(e.POLYLINE,n,["points"])}},{key:"rectangle",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=A(e.RECTANGLE,n,["topLeft","bottomRight","rx","ry"]),s=a.args.pop(),i=a.args.pop();if(s=void 0===s?0:s,0===(i=void 0===i?0:i)&&0===s)return a;var o=a.args[0],u=o.x,l=o.y,c=a.args[1],h=c.x,y=c.y,p=h-u,f=y-l;0===i&&(i=s),0===s&&(s=i),i>.5*p&&(i=.5*p),s>.5*f&&(s=.5*f);var x=u,v=l,m=u+i,d=l+s,b=h-i,g=y-s,w=h,k=y,P=[e.arc(m,d,i,s,2*E,3*E),e.line(m,v,b,v),e.arc(b,d,i,s,3*E,4*E),e.line(w,d,w,g),e.arc(b,g,i,s,0,E),e.line(b,k,m,k),e.arc(m,g,i,s,E,2*E),e.line(x,g,x,d)];return new e(e.PATH,P)}}]),e}();function A(e,t,n){var r;1===t.length?(t=t[0],r=Array.isArray(t)||"string"==typeof t?e+"Args":e):r=e+"Args";var a=M.execute(r,t);if(a===f)throw new TypeError("".concat(e," is not in a recognizable format: ").concat(JSON.stringify(t)));var s=1===n.length?a[n[0]]:n.map((function(e){return a[e]}));return new P(e,s)}P.ARC="Arc",P.QUADRATIC_BEZIER="Bezier2",P.CUBIC_BEZIER="Bezier3",P.CIRCLE="Circle",P.ELLIPSE="Ellipse",P.LINE="Line",P.PATH="Path",P.POLYGON="Polygon",P.POLYLINE="Polyline",P.RECTANGLE="Rectangle";var M=new v;M.execute('\ndef Center =\n    patterns {\n        { center: { x: number as x, y: number as y } },\n        { center: [ number as x, number as y ] },\n        { cx: number as x, cy: number as y },\n        { centerX: number as x, centerY: number as y }\n    } |> Point2D(x, y);\n\ndef Radii =\n    patterns {\n        { radii: { x: number as rx, y: number as ry } },\n        { radii: [ number as rx, number as ry ] },\n        { rx: number as rx, ry: number as ry },\n        { radiusX: number as rx, radiusY: number as ry }\n    } |> { "rx", "ry" };\n\ndef P1 =\n    patterns {\n        { p1: { x: number as x, y: number as y } },\n        { p1: [ number as x, number as y ] },\n        { p1x: number as x, p1y: number as y }\n    } |> Point2D(x, y);\n        \ndef P2 =\n    patterns {\n        { p2: { x: number as x, y: number as y } },\n        { p2: [ number as x, number as y ] },\n        { p2x: number as x, p2y: number as y }\n    } |> Point2D(x, y);\n        \ndef P3 =\n    patterns {\n        { p3: { x: number as x, y: number as y } },\n        { p3: [ number as x, number as y ] },\n        { p3x: number as x, p3y: number as y }\n    } |> Point2D(x, y);\n        \ndef P4 =\n    patterns {\n        { p4: { x: number as x, y: number as y } },\n        { p4: [ number as x, number as y ] },\n        { p4x: number as x, p4y: number as y }\n    } |> Point2D(x, y);\n\n            \ndef Arc = {\n    let radii = Radii,\n\n    "center": Center,\n    "radiusX": radii.rx,\n    "radiusY": radii.ry,\n    "startRadians": =~ number,\n    "endRadians": =~ number\n};\n\ndef ArcArgs = {\n    let elements =\n        patterns {\n            [ number as centerX, number as centerY, number as radiusX, number as radiusY, number as startRadians, number as endRadians ],\n            [ { x: number as centerX, y: number as centerY }, number as radiusX, number as radiusY, number as startRadians, number as endRadians ]\n        } |> { "centerX", "centerY", "radiusX", "radiusY", "startRadians", "endRadians" },\n    \n    "center": Point2D(elements.centerX, elements.centerY),\n    "radiusX": elements.radiusX,\n    "radiusY": elements.radiusY,\n    "startRadians": elements.startRadians,\n    "endRadians": elements.endRadians\n};\n\ndef Bezier2 = {\n    "p1": P1,\n    "p2": P2,\n    "p3": P3\n};\n\ndef Bezier2Args = {\n    let elements =\n        patterns {\n            [ number as p1x, number as p1y, number as p2x, number as p2y, number as p3x, number as p3y ],\n            [ { x: number as p1x, y: number as p1y }, { x: number as p2x, y: number as p2y }, { x: number as p3x, y: number as p3y }]\n        } |> { "p1x", "p1y", "p2x", "p2y", "p3x", "p3y" },\n    \n    "p1": Point2D(elements.p1x, elements.p1y),\n    "p2": Point2D(elements.p2x, elements.p2y),\n    "p3": Point2D(elements.p3x, elements.p3y)\n};\n\ndef Bezier3 = {\n    "p1": P1,\n    "p2": P2,\n    "p3": P3,\n    "p4": P4\n};\n\ndef Bezier3Args = {\n    let elements =\n        patterns {\n            [ number as p1x, number as p1y, number as p2x, number as p2y, number as p3x, number as p3y, number as p4x, number as p4y ],\n            [ { x: number as p1x, y: number as p1y }, { x: number as p2x, y: number as p2y }, { x: number as p3x, y: number as p3y }, { x: number as p4x, y: number as p4y }]\n        } |> { "p1x", "p1y", "p2x", "p2y", "p3x", "p3y", "p4x", "p4y" },\n    \n    "p1": Point2D(elements.p1x, elements.p1y),\n    "p2": Point2D(elements.p2x, elements.p2y),\n    "p3": Point2D(elements.p3x, elements.p3y),\n    "p4": Point2D(elements.p4x, elements.p4y)\n};\n\ndef Circle = {\n    "center": Center,\n    "radius":\n        patterns {\n            { r: number as radius},\n            { radius: number as radius }\n        } |> radius\n};\n\ndef CircleArgs = {\n    let elements =\n        patterns {\n            [ number as centerX, number as centerY, number as radius ],\n            [ { x: number as centerX, y: number as centerY }, number as radius ]\n        } |> { "centerX", "centerY", "radius" },\n    \n    "center": Point2D(elements.centerX, elements.centerY),\n    "radius": elements.radius\n};\n\ndef Ellipse = {\n    let radii = Radii,\n\n    "center": Center,\n    "radiusX": radii.rx,\n    "radiusY": radii.ry\n};\n\ndef EllipseArgs = {\n    let elements =\n       patterns {\n            [ number as centerX, number as centerY, number as radiusX, number as radiusY ],\n            [ { x: number as centerX, y: number as centerY }, number as radiusX, number as radiusY ]\n        } |> { "centerX", "centerY", "radiusX", "radiusY" },\n    \n    "center": Point2D(elements.centerX, elements.centerY),\n    "radiusX": elements.radiusX,\n    "radiusY": elements.radiusY\n};\n\ndef Line = {\n    "p1": P1,\n    "p2": P2\n};\n\ndef LineArgs = {\n    let elements =\n        patterns {\n            [ number as p1x, number as p1y, number as p2x, number as p2y ],\n            [ { x: number as p1x, y: number as p1y }, { x: number as p2x, y: number as p2y } ]\n        } |> { "p1x", "p1y", "p2x", "p2y" },\n        \n    "p1": Point2D(elements.p1x, elements.p1y),\n    "p2": Point2D(elements.p2x, elements.p2y)\n};\n\ndef Path = {\n    "segments":\n        =~ { d: string as data } |> PathData(data)\n};\n\ndef PathArgs = {\n    "segments":\n        =~ string as data |> PathData(data)\n};\n\ndef Polygon = {\n    "points":\n        sequences {\n            =~ { points: [ (number, number); 0.. as coords ] }\n            |> [ map(coords, Point2D(...$)) ],\n\n            =~ { points: [ { x: number, y: number }; 0.. ] as points }\n            |> [ map(points, Point2D($.x, $.y)) ]\n        }\n};\n\ndef PolygonArgs = {\n    "points":\n        sequences {\n            =~ [ (number, number); 0.. as coords ]\n            |> [ map(coords, Point2D(...$)) ],\n\n            =~ [ { x: number, y: number }; 0.. ] as points\n            |> [ map(points, Point2D($.x, $.y)) ]\n        }\n};\n\ndef Polyline = {\n    "points":\n        sequences {\n            =~ { points: [ (number, number); 0.. as coords ] }\n            |> [ map(coords, Point2D(...$)) ],\n\n            =~ { points: [ { x: number, y: number }; 0.. ] as points }\n            |> [ map(points, Point2D($.x, $.y)) ]\n        }\n};\n\ndef PolylineArgs = {\n    "points":\n        sequences {\n            =~ [ (number, number); 0.. as coords ]\n            |> [ map(coords, Point2D(...$)) ],\n\n            =~ [ { x: number, y: number }; 0.. ] as points\n            |> [ map(points, Point2D($.x, $.y)) ]\n        }\n};\n\ndef Rectangle = {\n    let topLeft =\n        patterns {\n            { topLeft: { x: number as x, y: number as y } },\n            { topLeft: [ number as x, number as y ] },\n            { x: number as x, y: number as y },\n            { top: number as x, left: number as y }\n        } |> { "x", "y" },\n\n    "topLeft":\n        Point2D(topLeft.x, topLeft.y),\n\n    "bottomRight":\n        sequences {\n            patterns {\n                { bottomRight: { x: number as x, y: number as y } },\n                { bottomRight: [ number as x, number as y ] }\n            } |> Point2D(x, y),\n            patterns {\n                { w: number as w, h: number as h },\n                { width: number as w, height: number as h },\n                { size: { x: number as w, y: number as h } },\n                { size: [ number as w, number as h ] }\n            } |> Point2D(topLeft.x + w, topLeft.y + h)\n        },\n\n    "rx":\n        sequences {\n            =~ { rx: number as rx } |> rx,\n            =~ any |> 0\n        },\n    "ry":\n        sequences {\n            =~ { ry: number as ry } |> ry,\n            =~ any |> 0\n        }\n};\n\ndef RectangleArgs = {\n    let elements =\n        patterns {\n            [ number as x, number as y, number as width, number as height ],\n            [ number as x, number as y, number as width, number as height, number as rx, number as ry ],\n            [ { x: number as x, y: number as y }, { x: number as width, y: number as height } ],\n            [ { x: number as x, y: number as y }, { x: number as width, y: number as height }, { rx: number as rx, ry: number as ry } ],\n            [ { x: number as x, y: number as y }, { x: number as width, y: number as height }, { radiusX: number as rx, radiusY: number as ry } ]\n        } |> { "x", "y", "width", "height", "rx", "ry" },\n\n    "topLeft": Point2D(elements.x, elements.y),\n    "bottomRight": Point2D(elements.x + elements.width, elements.y + elements.height),\n    "rx": elements.rx,\n    "ry": elements.ry\n}\n'),M.addFunction("Point2D",(function(e,t){return new i(e,t)})),M.addFunction("PathData",(function(e){var t=new b,n=new k(P);return t.setHandler(n),t.parseData(e),n.shapes}));var S=2*Math.PI,R=new o(1,0);function _(e){return null==e}function I(e){var t=e%S;return t<0?t+S:t}function T(e,t,n,r,a,s){if(0===e.points.length)return e;var i=new X("No Intersection"),u=I(a),l=I(s);l<u&&(l+=S);var c=!0,h=!1,y=void 0;try{for(var p,f=e.points[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var x=p.value,v=I(R.angleBetween(o.fromPoints(t,x)));u<=v&&v<=l&&i.appendPoint(x)}}catch(e){h=!0,y=e}finally{try{c||null==f.return||f.return()}finally{if(h)throw y}}return i.points.length>0&&(i.status="Intersection"),i}function N(e){var t=e.slice();return t.push(e[0]),t}var X=function(){function e(n){t(this,e),this.init(n)}return r(e,[{key:"init",value:function(e){this.status=e,this.points=[]}},{key:"appendPoint",value:function(e){this.points.push(e)}},{key:"appendPoints",value:function(e){this.points=this.points.concat(e)}}],[{key:"intersect",value:function(t,n){var r;if(_(t)||_(n))r=new e("No Intersection");else if("Path"===t.name)r=e.intersectPathShape(t,n);else if("Path"===n.name)r=e.intersectPathShape(n,t);else if("Arc"===t.name)r=e.intersectArcShape(t,n);else if("Arc"===n.name)r=e.intersectArcShape(n,t);else{var a,s;if(t.name<n.name?(a="intersect"+t.name+n.name,s=t.args.concat(n.args)):(a="intersect"+n.name+t.name,s=n.args.concat(t.args)),!(a in e))throw new TypeError("Intersection not available: "+a);r=e[a].apply(null,s)}return r}},{key:"intersectPathShape",value:function(t,n){var r=new e("No Intersection"),a=!0,s=!1,i=void 0;try{for(var o,u=t.args[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var l=o.value,c=e.intersect(l,n);r.appendPoints(c.points)}}catch(e){s=!0,i=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw i}}return r.points.length>0&&(r.status="Intersection"),r}},{key:"intersectArcShape",value:function(t,n){var r=a(t.args,5),s=r[0],i=r[1],o=r[2],u=r[3],l=r[4],c=new P(P.ELLIPSE,[s,i,o]);return T(e.intersect(c,n),s,0,0,u,l)}},{key:"intersectBezier2Bezier2",value:function(t,n,r,a,s,o){var u,l,h=new e("No Intersection");u=n.multiply(-2);var y=t.add(u.add(r));u=t.multiply(-2),l=n.multiply(2);var p=u.add(l),f=new i(t.x,t.y);u=s.multiply(-2);var x=a.add(u.add(o));u=a.multiply(-2),l=s.multiply(2);var v=u.add(l),m=new i(a.x,a.y);u=y.x*p.y-p.x*y.y,l=x.x*p.y-p.x*x.y;var d=v.x*p.y-p.x*v.y,b=p.x*(f.y-m.y)+p.y*(-f.x+m.x),g=x.x*y.y-y.x*x.y,w=v.x*y.y-y.x*v.y,k=y.x*(f.y-m.y)+y.y*(-f.x+m.x),E=new c(-g*g,-2*g*w,u*l-w*w-2*g*k,u*d-2*w*k,u*b-k*k).getRoots(),P=!0,A=!1,M=void 0;try{for(var S,R=E[Symbol.iterator]();!(P=(S=R.next()).done);P=!0){var _=S.value;if(0<=_&&_<=1){var I=new c(y.x,p.x,f.x-m.x-_*v.x-_*_*x.x);I.simplifyEquals();var T=I.getRoots(),N=new c(y.y,p.y,f.y-m.y-_*v.y-_*_*x.y);N.simplifyEquals();var X=N.getRoots();if(T.length>0&&X.length>0){var Y=!0,C=!1,L=void 0;try{e:for(var $,D=T[Symbol.iterator]();!(Y=($=D.next()).done);Y=!0){var z=$.value;if(0<=z&&z<=1){var B=!0,O=!1,q=void 0;try{for(var j,U=X[Symbol.iterator]();!(B=(j=U.next()).done);B=!0){var V=j.value;if(Math.abs(z-V)<1e-4){h.points.push(x.multiply(_*_).add(v.multiply(_).add(m)));break e}}}catch(e){O=!0,q=e}finally{try{B||null==U.return||U.return()}finally{if(O)throw q}}}}}catch(e){C=!0,L=e}finally{try{Y||null==D.return||D.return()}finally{if(C)throw L}}}}}}catch(e){A=!0,M=e}finally{try{P||null==R.return||R.return()}finally{if(A)throw M}}return h.points.length>0&&(h.status="Intersection"),h}},{key:"intersectBezier2Bezier3",value:function(t,n,r,a,s,o,u){var l,h,y,p,f=new e("No Intersection");l=n.multiply(-2);var x=t.add(l.add(r));l=t.multiply(-2),h=n.multiply(2);var v=l.add(h),m=new i(t.x,t.y);l=a.multiply(-1),h=s.multiply(3),y=o.multiply(-3),p=l.add(h.add(y.add(u)));var d=new i(p.x,p.y);l=a.multiply(3),h=s.multiply(-6),y=o.multiply(3),p=l.add(h.add(y));var b=new i(p.x,p.y);l=a.multiply(-3),h=s.multiply(3),y=l.add(h);var g=new i(y.x,y.y),w=new i(a.x,a.y),k=m.x*m.x,E=m.y*m.y,P=v.x*v.x,A=v.y*v.y,M=x.x*x.x,S=x.y*x.y,R=w.x*w.x,_=w.y*w.y,I=g.x*g.x,T=g.y*g.y,N=b.x*b.x,X=b.y*b.y,Y=d.x*d.x,C=d.y*d.y,L=new c(-2*x.x*x.y*d.x*d.y+M*C+S*Y,-2*x.x*x.y*b.x*d.y-2*x.x*x.y*b.y*d.x+2*S*b.x*d.x+2*M*b.y*d.y,-2*x.x*g.x*x.y*d.y-2*x.x*x.y*g.y*d.x-2*x.x*x.y*b.x*b.y+2*g.x*S*d.x+S*N+M*(2*g.y*d.y+X),2*m.x*x.x*x.y*d.y+2*m.y*x.x*x.y*d.x+v.x*v.y*x.x*d.y+v.x*v.y*x.y*d.x-2*w.x*x.x*x.y*d.y-2*x.x*w.y*x.y*d.x-2*x.x*g.x*x.y*b.y-2*x.x*x.y*g.y*b.x-2*m.x*S*d.x-2*m.y*M*d.y+2*w.x*S*d.x+2*g.x*S*b.x-A*x.x*d.x-P*x.y*d.y+M*(2*w.y*d.y+2*g.y*b.y),2*m.x*x.x*x.y*b.y+2*m.y*x.x*x.y*b.x+v.x*v.y*x.x*b.y+v.x*v.y*x.y*b.x-2*w.x*x.x*x.y*b.y-2*x.x*w.y*x.y*b.x-2*x.x*g.x*x.y*g.y-2*m.x*S*b.x-2*m.y*M*b.y+2*w.x*S*b.x-A*x.x*b.x-P*x.y*b.y+I*S+M*(2*w.y*b.y+T),2*m.x*x.x*x.y*g.y+2*m.y*x.x*g.x*x.y+v.x*v.y*x.x*g.y+v.x*v.y*g.x*x.y-2*w.x*x.x*x.y*g.y-2*x.x*w.y*g.x*x.y-2*m.x*g.x*S-2*m.y*M*g.y+2*w.x*g.x*S-A*x.x*g.x-P*x.y*g.y+2*M*w.y*g.y,-2*m.x*m.y*x.x*x.y-m.x*v.x*v.y*x.y-m.y*v.x*v.y*x.x+2*m.x*x.x*w.y*x.y+2*m.y*w.x*x.x*x.y+v.x*w.x*v.y*x.y+v.x*v.y*x.x*w.y-2*w.x*x.x*w.y*x.y-2*m.x*w.x*S+m.x*A*x.x+m.y*P*x.y-2*m.y*M*w.y-w.x*A*x.x-P*w.y*x.y+k*S+E*M+R*S+M*_).getRootsInInterval(0,1),$=!0,D=!1,z=void 0;try{for(var B,O=L[Symbol.iterator]();!($=(B=O.next()).done);$=!0){var q=B.value,j=new c(x.x,v.x,m.x-w.x-q*g.x-q*q*b.x-q*q*q*d.x).getRoots(),U=new c(x.y,v.y,m.y-w.y-q*g.y-q*q*b.y-q*q*q*d.y).getRoots();if(j.length>0&&U.length>0){var V=!0,F=!1,G=void 0;try{e:for(var Q,H=j[Symbol.iterator]();!(V=(Q=H.next()).done);V=!0){var Z=Q.value;if(0<=Z&&Z<=1){var W=!0,J=!1,K=void 0;try{for(var ee,te=U[Symbol.iterator]();!(W=(ee=te.next()).done);W=!0){var ne=ee.value;if(Math.abs(Z-ne)<1e-4){f.points.push(d.multiply(q*q*q).add(b.multiply(q*q).add(g.multiply(q).add(w))));break e}}}catch(e){J=!0,K=e}finally{try{W||null==te.return||te.return()}finally{if(J)throw K}}}}}catch(e){F=!0,G=e}finally{try{V||null==H.return||H.return()}finally{if(F)throw G}}}}}catch(e){D=!0,z=e}finally{try{$||null==O.return||O.return()}finally{if(D)throw z}}return f.points.length>0&&(f.status="Intersection"),f}},{key:"intersectBezier2Circle",value:function(t,n,r,a,s){return e.intersectBezier2Ellipse(t,n,r,a,s,s)}},{key:"intersectBezier2Ellipse",value:function(t,n,r,a,s,o){var u,l=new e("No Intersection");u=n.multiply(-2);var h=t.add(u.add(r));u=t.multiply(-2);var y=n.multiply(2),p=u.add(y),f=new i(t.x,t.y),x=s*s,v=o*o,m=new c(v*h.x*h.x+x*h.y*h.y,2*(v*h.x*p.x+x*h.y*p.y),v*(2*h.x*f.x+p.x*p.x)+x*(2*h.y*f.y+p.y*p.y)-2*(v*a.x*h.x+x*a.y*h.y),2*(v*p.x*(f.x-a.x)+x*p.y*(f.y-a.y)),v*(f.x*f.x+a.x*a.x)+x*(f.y*f.y+a.y*a.y)-2*(v*a.x*f.x+x*a.y*f.y)-x*v).getRoots(),d=!0,b=!1,g=void 0;try{for(var w,k=m[Symbol.iterator]();!(d=(w=k.next()).done);d=!0){var E=w.value;0<=E&&E<=1&&l.points.push(h.multiply(E*E).add(p.multiply(E).add(f)))}}catch(e){b=!0,g=e}finally{try{d||null==k.return||k.return()}finally{if(b)throw g}}return l.points.length>0&&(l.status="Intersection"),l}},{key:"intersectBezier2Line",value:function(t,n,r,a,s){var u,l=a.min(s),h=a.max(s),y=new e("No Intersection");u=n.multiply(-2);var p=t.add(u.add(r));u=t.multiply(-2);var f=n.multiply(2),x=u.add(f),v=new i(t.x,t.y),m=new o(a.y-s.y,s.x-a.x),d=a.x*s.y-s.x*a.y,b=new c(m.dot(p),m.dot(x),m.dot(v)+d).getRoots(),g=!0,w=!1,k=void 0;try{for(var E,P=b[Symbol.iterator]();!(g=(E=P.next()).done);g=!0){var A=E.value;if(0<=A&&A<=1){var M=t.lerp(n,A),S=n.lerp(r,A),R=M.lerp(S,A);a.x===s.x?l.y<=R.y&&R.y<=h.y&&(y.status="Intersection",y.appendPoint(R)):a.y===s.y?l.x<=R.x&&R.x<=h.x&&(y.status="Intersection",y.appendPoint(R)):l.x<=R.x&&R.x<=h.x&&l.y<=R.y&&R.y<=h.y&&(y.status="Intersection",y.appendPoint(R))}}}catch(e){w=!0,k=e}finally{try{g||null==P.return||P.return()}finally{if(w)throw k}}return y}},{key:"intersectBezier2Polygon",value:function(t,n,r,a){return e.intersectBezier2Polyline(t,n,r,N(a))}},{key:"intersectBezier2Polyline",value:function(t,n,r,a){for(var s=new e("No Intersection"),i=a.length,o=0;o<i-1;o++){var u=a[o],l=a[o+1],c=e.intersectBezier2Line(t,n,r,u,l);s.appendPoints(c.points)}return s.points.length>0&&(s.status="Intersection"),s}},{key:"intersectBezier2Rectangle",value:function(t,n,r,a,s){var o=a.min(s),u=a.max(s),l=new i(u.x,o.y),c=new i(o.x,u.y),h=e.intersectBezier2Line(t,n,r,o,l),y=e.intersectBezier2Line(t,n,r,l,u),p=e.intersectBezier2Line(t,n,r,u,c),f=e.intersectBezier2Line(t,n,r,c,o),x=new e("No Intersection");return x.appendPoints(h.points),x.appendPoints(y.points),x.appendPoints(p.points),x.appendPoints(f.points),x.points.length>0&&(x.status="Intersection"),x}},{key:"intersectBezier3Bezier3",value:function(t,n,r,a,s,o,u,l){var h,y,p,f,x=new e("No Intersection");h=t.multiply(-1),y=n.multiply(3),p=r.multiply(-3),f=h.add(y.add(p.add(a)));var v=new i(f.x,f.y);h=t.multiply(3),y=n.multiply(-6),p=r.multiply(3),f=h.add(y.add(p));var m=new i(f.x,f.y);h=t.multiply(-3),y=n.multiply(3),p=h.add(y);var d=new i(p.x,p.y),b=new i(t.x,t.y);h=s.multiply(-1),y=o.multiply(3),p=u.multiply(-3),f=h.add(y.add(p.add(l)));var g=new i(f.x,f.y);h=s.multiply(3),y=o.multiply(-6),p=u.multiply(3),f=h.add(y.add(p));var w=new i(f.x,f.y);h=s.multiply(-3),y=o.multiply(3),p=h.add(y);var k=new i(p.x,p.y),E=new i(s.x,s.y);h=v.x*m.y-m.x*v.y,y=v.x*d.y-d.x*v.y;var P=v.x*b.y-b.x*v.y+E.x*v.y-v.x*E.y,A=k.x*v.y-v.x*k.y,M=w.x*v.y-v.x*w.y,S=g.x*v.y-v.x*g.y;f=v.x*d.y-d.x*v.y;var R=v.x*b.y+m.x*d.y-d.x*m.y-b.x*v.y+E.x*v.y-v.x*E.y,_=k.x*v.y-v.x*k.y,I=w.x*v.y-v.x*w.y,T=g.x*v.y-v.x*g.y,N=m.x*b.y-b.x*m.y+E.x*m.y-m.x*E.y,X=k.x*m.y-m.x*k.y,Y=w.x*m.y-m.x*w.y,C=g.x*m.y-m.x*g.y,L=v.x*b.y-b.x*v.y+E.x*v.y-v.x*E.y,$=k.x*v.y-v.x*k.y,D=w.x*v.y-v.x*w.y,z=g.x*v.y-v.x*g.y,B=m.x*b.y-b.x*m.y+E.x*m.y-m.x*E.y,O=k.x*m.y-m.x*k.y,q=w.x*m.y-m.x*w.y,j=g.x*m.y-m.x*g.y,U=d.x*b.y-b.x*d.y+E.x*d.y-d.x*E.y,V=k.x*d.y-d.x*k.y,F=w.x*d.y-d.x*w.y,G=g.x*d.y-d.x*g.y,Q=new c(-S*T*z,-S*T*D-S*I*z-M*T*z,-S*T*$-S*I*D-M*T*D-S*_*z-M*I*z-A*T*z,-S*T*L-S*I*$-M*T*$-S*_*D-M*I*D-A*T*D-S*R*z-M*_*z-A*I*z-P*T*z+y*C*z+S*f*j-h*C*j+h*T*G,-S*I*L-M*T*L-S*_*$-M*I*$-A*T*$-S*R*D-M*_*D-A*I*D-P*T*D+y*C*D-M*R*z-A*_*z-P*I*z+y*Y*z+S*f*q-h*C*q+M*f*j-h*Y*j+h*T*F+h*I*G,-S*_*L-M*I*L-A*T*L-S*R*$-M*_*$-A*I*$-P*T*$+y*C*$-M*R*D-A*_*D-P*I*D+y*Y*D-A*R*z-P*_*z+y*X*z+S*f*O-h*C*O+M*f*q-h*Y*q+A*f*j-h*X*j+h*T*V+h*I*F+h*_*G,-S*R*L-M*_*L-A*I*L-P*T*L+y*C*L-M*R*$-A*_*$-P*I*$+y*Y*$-A*R*D-P*_*D+y*X*D-P*R*z+y*N*z+S*f*B-h*C*B+M*f*O-h*Y*O+A*f*q-h*X*q+P*f*j-h*N*j+h*T*U+h*I*V+h*_*F-y*f*G+h*R*G,-M*R*L-A*_*L-P*I*L+y*Y*L-A*R*$-P*_*$+y*X*$-P*R*D+y*N*D+M*f*B-h*Y*B+A*f*O-h*X*O+P*f*q-h*N*q+h*I*U+h*_*V-y*f*F+h*R*F,-A*R*L-P*_*L+y*X*L-P*R*$+y*N*$+A*f*B-h*X*B+P*f*O-h*N*O+h*_*U-y*f*V+h*R*V,-P*R*L+y*N*L+P*f*B-h*N*B-y*f*U+h*R*U);Q.simplifyEquals();var H=Q.getRootsInInterval(0,1),Z=!0,W=!1,J=void 0;try{for(var K,ee=H[Symbol.iterator]();!(Z=(K=ee.next()).done);Z=!0){var te=K.value,ne=new c(v.x,m.x,d.x,b.x-E.x-te*k.x-te*te*w.x-te*te*te*g.x);ne.simplifyEquals();var re=ne.getRoots(),ae=new c(v.y,m.y,d.y,b.y-E.y-te*k.y-te*te*w.y-te*te*te*g.y);ae.simplifyEquals();var se=ae.getRoots();if(re.length>0&&se.length>0){var ie=!0,oe=!1,ue=void 0;try{e:for(var le,ce=re[Symbol.iterator]();!(ie=(le=ce.next()).done);ie=!0){var he=le.value;if(0<=he&&he<=1){var ye=!0,pe=!1,fe=void 0;try{for(var xe,ve=se[Symbol.iterator]();!(ye=(xe=ve.next()).done);ye=!0){var me=xe.value;if(Math.abs(he-me)<1e-4){x.points.push(g.multiply(te*te*te).add(w.multiply(te*te).add(k.multiply(te).add(E))));break e}}}catch(e){pe=!0,fe=e}finally{try{ye||null==ve.return||ve.return()}finally{if(pe)throw fe}}}}}catch(e){oe=!0,ue=e}finally{try{ie||null==ce.return||ce.return()}finally{if(oe)throw ue}}}}}catch(e){W=!0,J=e}finally{try{Z||null==ee.return||ee.return()}finally{if(W)throw J}}return x.points.length>0&&(x.status="Intersection"),x}},{key:"intersectBezier3Circle",value:function(t,n,r,a,s,i){return e.intersectBezier3Ellipse(t,n,r,a,s,i,i)}},{key:"intersectBezier3Ellipse",value:function(t,n,r,a,s,o,u){var l,h,y,p,f=new e("No Intersection");l=t.multiply(-1),h=n.multiply(3),y=r.multiply(-3),p=l.add(h.add(y.add(a)));var x=new i(p.x,p.y);l=t.multiply(3),h=n.multiply(-6),y=r.multiply(3),p=l.add(h.add(y));var v=new i(p.x,p.y);l=t.multiply(-3),h=n.multiply(3),y=l.add(h);var m=new i(y.x,y.y),d=new i(t.x,t.y),b=o*o,g=u*u,w=new c(x.x*x.x*g+x.y*x.y*b,2*(x.x*v.x*g+x.y*v.y*b),2*(x.x*m.x*g+x.y*m.y*b)+v.x*v.x*g+v.y*v.y*b,2*x.x*g*(d.x-s.x)+2*x.y*b*(d.y-s.y)+2*(v.x*m.x*g+v.y*m.y*b),2*v.x*g*(d.x-s.x)+2*v.y*b*(d.y-s.y)+m.x*m.x*g+m.y*m.y*b,2*m.x*g*(d.x-s.x)+2*m.y*b*(d.y-s.y),d.x*d.x*g-2*d.y*s.y*b-2*d.x*s.x*g+d.y*d.y*b+s.x*s.x*g+s.y*s.y*b-b*g).getRootsInInterval(0,1),k=!0,E=!1,P=void 0;try{for(var A,M=w[Symbol.iterator]();!(k=(A=M.next()).done);k=!0){var S=A.value;f.points.push(x.multiply(S*S*S).add(v.multiply(S*S).add(m.multiply(S).add(d))))}}catch(e){E=!0,P=e}finally{try{k||null==M.return||M.return()}finally{if(E)throw P}}return f.points.length>0&&(f.status="Intersection"),f}},{key:"intersectBezier3Line",value:function(t,n,r,a,s,i){var u,l,h,y,p=s.min(i),f=s.max(i),x=new e("No Intersection");u=t.multiply(-1),l=n.multiply(3),h=r.multiply(-3),y=u.add(l.add(h.add(a)));var v=new o(y.x,y.y);u=t.multiply(3),l=n.multiply(-6),h=r.multiply(3),y=u.add(l.add(h));var m=new o(y.x,y.y);u=t.multiply(-3),l=n.multiply(3),h=u.add(l);var d=new o(h.x,h.y),b=new o(t.x,t.y),g=new o(s.y-i.y,i.x-s.x),w=s.x*i.y-i.x*s.y,k=new c(g.dot(v),g.dot(m),g.dot(d),g.dot(b)+w).getRoots(),E=!0,P=!1,A=void 0;try{for(var M,S=k[Symbol.iterator]();!(E=(M=S.next()).done);E=!0){var R=M.value;if(0<=R&&R<=1){var _=t.lerp(n,R),I=n.lerp(r,R),T=r.lerp(a,R),N=_.lerp(I,R),X=I.lerp(T,R),Y=N.lerp(X,R);s.x===i.x?p.y<=Y.y&&Y.y<=f.y&&(x.status="Intersection",x.appendPoint(Y)):s.y===i.y?p.x<=Y.x&&Y.x<=f.x&&(x.status="Intersection",x.appendPoint(Y)):p.x<=Y.x&&Y.x<=f.x&&p.y<=Y.y&&Y.y<=f.y&&(x.status="Intersection",x.appendPoint(Y))}}}catch(e){P=!0,A=e}finally{try{E||null==S.return||S.return()}finally{if(P)throw A}}return x}},{key:"intersectBezier3Polygon",value:function(t,n,r,a,s){return e.intersectBezier3Polyline(t,n,r,a,N(s))}},{key:"intersectBezier3Polyline",value:function(t,n,r,a,s){for(var i=new e("No Intersection"),o=s.length,u=0;u<o-1;u++){var l=s[u],c=s[u+1],h=e.intersectBezier3Line(t,n,r,a,l,c);i.appendPoints(h.points)}return i.points.length>0&&(i.status="Intersection"),i}},{key:"intersectBezier3Rectangle",value:function(t,n,r,a,s,o){var u=s.min(o),l=s.max(o),c=new i(l.x,u.y),h=new i(u.x,l.y),y=e.intersectBezier3Line(t,n,r,a,u,c),p=e.intersectBezier3Line(t,n,r,a,c,l),f=e.intersectBezier3Line(t,n,r,a,l,h),x=e.intersectBezier3Line(t,n,r,a,h,u),v=new e("No Intersection");return v.appendPoints(y.points),v.appendPoints(p.points),v.appendPoints(f.points),v.appendPoints(x.points),v.points.length>0&&(v.status="Intersection"),v}},{key:"intersectCircleCircle",value:function(t,n,r,a){var s,o=n+a,u=Math.abs(n-a),l=t.distanceFrom(r);if(l>o)s=new e("Outside");else if(l<u)s=new e("Inside");else{s=new e("Intersection");var c=(n*n-a*a+l*l)/(2*l),h=Math.sqrt(n*n-c*c),y=t.lerp(r,c/l),p=h/l;s.points.push(new i(y.x-p*(r.y-t.y),y.y+p*(r.x-t.x))),s.points.push(new i(y.x+p*(r.y-t.y),y.y-p*(r.x-t.x)))}return s}},{key:"intersectCircleEllipse",value:function(t,n,r,a,s){return e.intersectEllipseEllipse(t,n,n,r,a,s)}},{key:"intersectCircleLine",value:function(t,n,r,a){var s,i=(a.x-r.x)*(a.x-r.x)+(a.y-r.y)*(a.y-r.y),o=2*((a.x-r.x)*(r.x-t.x)+(a.y-r.y)*(r.y-t.y)),u=o*o-4*i*(t.x*t.x+t.y*t.y+r.x*r.x+r.y*r.y-2*(t.x*r.x+t.y*r.y)-n*n);if(u<0)s=new e("Outside");else if(0===u)s=new e("Tangent");else{var l=Math.sqrt(u),c=(-o+l)/(2*i),h=(-o-l)/(2*i);(c<0||c>1)&&(h<0||h>1)?s=new e(c<0&&h<0||c>1&&h>1?"Outside":"Inside"):(s=new e("Intersection"),0<=c&&c<=1&&s.points.push(r.lerp(a,c)),0<=h&&h<=1&&s.points.push(r.lerp(a,h)))}return s}},{key:"intersectCirclePolygon",value:function(t,n,r){return e.intersectCirclePolyline(t,n,N(r))}},{key:"intersectCirclePolyline",value:function(t,n,r){for(var a,s=new e("No Intersection"),i=r.length,o=0;o<i-1;o++){var u=r[o],l=r[o+1];a=e.intersectCircleLine(t,n,u,l),s.appendPoints(a.points)}return s.points.length>0?s.status="Intersection":s.status=a.status,s}},{key:"intersectCircleRectangle",value:function(t,n,r,a){var s=r.min(a),o=r.max(a),u=new i(o.x,s.y),l=new i(s.x,o.y),c=e.intersectCircleLine(t,n,s,u),h=e.intersectCircleLine(t,n,u,o),y=e.intersectCircleLine(t,n,o,l),p=e.intersectCircleLine(t,n,l,s),f=new e("No Intersection");return f.appendPoints(c.points),f.appendPoints(h.points),f.appendPoints(y.points),f.appendPoints(p.points),f.points.length>0?f.status="Intersection":f.status=c.status,f}},{key:"intersectEllipseEllipse",value:function(t,n,r,a,s,o){var u,l,h,y,p,f,x,v,m,d,b,g,w,k,E,P=[r*r,0,n*n,-2*r*r*t.x,-2*n*n*t.y,r*r*t.x*t.x+n*n*t.y*t.y-n*n*r*r],A=[o*o,0,s*s,-2*o*o*a.x,-2*s*s*a.y,o*o*a.x*a.x+s*s*a.y*a.y-s*s*o*o],M=(l=A,h=(u=P)[0]*l[1]-l[0]*u[1],y=u[0]*l[2]-l[0]*u[2],p=u[0]*l[3]-l[0]*u[3],f=u[0]*l[4]-l[0]*u[4],x=u[0]*l[5]-l[0]*u[5],v=u[1]*l[2]-l[1]*u[2],m=u[1]*l[4]-l[1]*u[4],d=u[1]*l[5]-l[1]*u[5],b=u[2]*l[3]-l[2]*u[3],g=u[3]*l[4]-l[3]*u[4],w=u[3]*l[5]-l[3]*u[5],new c(h*v-y*y,h*(E=m-b)+p*v-2*y*f,h*(k=d+g)+p*E-f*f-2*y*x,h*w+p*k-2*f*x,p*w-x*x)).getRoots(),S=.001*(P[0]*P[0]+2*P[1]*P[1]+P[2]*P[2]),R=.001*(A[0]*A[0]+2*A[1]*A[1]+A[2]*A[2]),_=new e("No Intersection"),I=!0,T=!1,N=void 0;try{for(var X,Y=M[Symbol.iterator]();!(I=(X=Y.next()).done);I=!0){var C=X.value,L=new c(P[0],P[3]+C*P[1],P[5]+C*(P[4]+C*P[2])).getRoots(),$=!0,D=!1,z=void 0;try{for(var B,O=L[Symbol.iterator]();!($=(B=O.next()).done);$=!0){var q=B.value,j=(P[0]*q+P[1]*C+P[3])*q+(P[2]*C+P[4])*C+P[5];Math.abs(j)<S&&(j=(A[0]*q+A[1]*C+A[3])*q+(A[2]*C+A[4])*C+A[5],Math.abs(j)<R&&_.appendPoint(new i(q,C)))}}catch(e){D=!0,z=e}finally{try{$||null==O.return||O.return()}finally{if(D)throw z}}}}catch(e){T=!0,N=e}finally{try{I||null==Y.return||Y.return()}finally{if(T)throw N}}return _.points.length>0&&(_.status="Intersection"),_}},{key:"intersectEllipseLine",value:function(t,n,r,a,s){var i,u=new o(a.x,a.y),l=o.fromPoints(a,s),c=new o(t.x,t.y),h=u.subtract(c),y=new o(l.x/(n*n),l.y/(r*r)),p=new o(h.x/(n*n),h.y/(r*r)),f=l.dot(y),x=l.dot(p),v=x*x-f*(t=h.dot(p)-1);if(v<0)i=new e("Outside");else if(v>0){var m=Math.sqrt(v),d=(-x-m)/f,b=(-x+m)/f;(d<0||1<d)&&(b<0||1<b)?i=new e(d<0&&b<0||d>1&&b>1?"Outside":"Inside"):(i=new e("Intersection"),0<=d&&d<=1&&i.appendPoint(a.lerp(s,d)),0<=b&&b<=1&&i.appendPoint(a.lerp(s,b)))}else{var g=-x/f;0<=g&&g<=1?(i=new e("Intersection")).appendPoint(a.lerp(s,g)):i=new e("Outside")}return i}},{key:"intersectEllipsePolygon",value:function(t,n,r,a){return e.intersectEllipsePolyline(t,n,r,N(a))}},{key:"intersectEllipsePolyline",value:function(t,n,r,a){for(var s=new e("No Intersection"),i=a.length,o=0;o<i-1;o++){var u=a[o],l=a[o+1],c=e.intersectEllipseLine(t,n,r,u,l);s.appendPoints(c.points)}return s.points.length>0&&(s.status="Intersection"),s}},{key:"intersectEllipseRectangle",value:function(t,n,r,a,s){var o=a.min(s),u=a.max(s),l=new i(u.x,o.y),c=new i(o.x,u.y),h=e.intersectEllipseLine(t,n,r,o,l),y=e.intersectEllipseLine(t,n,r,l,u),p=e.intersectEllipseLine(t,n,r,u,c),f=e.intersectEllipseLine(t,n,r,c,o),x=new e("No Intersection");return x.appendPoints(h.points),x.appendPoints(y.points),x.appendPoints(p.points),x.appendPoints(f.points),x.points.length>0&&(x.status="Intersection"),x}},{key:"intersectLineLine",value:function(t,n,r,a){var s,o=(a.x-r.x)*(t.y-r.y)-(a.y-r.y)*(t.x-r.x),u=(n.x-t.x)*(t.y-r.y)-(n.y-t.y)*(t.x-r.x),l=(a.y-r.y)*(n.x-t.x)-(a.x-r.x)*(n.y-t.y);if(0!==l){var c=o/l,h=u/l;0<=c&&c<=1&&0<=h&&h<=1?(s=new e("Intersection")).points.push(new i(t.x+c*(n.x-t.x),t.y+c*(n.y-t.y))):s=new e("No Intersection")}else s=new e(0===o||0===u?"Coincident":"Parallel");return s}},{key:"intersectLinePolygon",value:function(t,n,r){return e.intersectLinePolyline(t,n,N(r))}},{key:"intersectLinePolyline",value:function(t,n,r){for(var a=new e("No Intersection"),s=r.length,i=0;i<s-1;i++){var o=r[i],u=r[i+1],l=e.intersectLineLine(t,n,o,u);a.appendPoints(l.points)}return a.points.length>0&&(a.status="Intersection"),a}},{key:"intersectLineRectangle",value:function(t,n,r,a){var s=r.min(a),o=r.max(a),u=new i(o.x,s.y),l=new i(s.x,o.y),c=e.intersectLineLine(s,u,t,n),h=e.intersectLineLine(u,o,t,n),y=e.intersectLineLine(o,l,t,n),p=e.intersectLineLine(l,s,t,n),f=new e("No Intersection");return f.appendPoints(c.points),f.appendPoints(h.points),f.appendPoints(y.points),f.appendPoints(p.points),f.points.length>0&&(f.status="Intersection"),f}},{key:"intersectPolygonPolygon",value:function(t,n){return e.intersectPolylinePolyline(N(t),N(n))}},{key:"intersectPolygonPolyline",value:function(t,n){return e.intersectPolylinePolyline(N(t),n)}},{key:"intersectPolygonRectangle",value:function(t,n,r){return e.intersectPolylineRectangle(N(t),n,r)}},{key:"intersectPolylinePolyline",value:function(t,n){for(var r=new e("No Intersection"),a=t.length,s=0;s<a-1;s++){var i=t[s],o=t[s+1],u=e.intersectLinePolyline(i,o,n);r.appendPoints(u.points)}return r.points.length>0&&(r.status="Intersection"),r}},{key:"intersectPolylineRectangle",value:function(t,n,r){var a=n.min(r),s=n.max(r),o=new i(s.x,a.y),u=new i(a.x,s.y),l=e.intersectLinePolyline(a,o,t),c=e.intersectLinePolyline(o,s,t),h=e.intersectLinePolyline(s,u,t),y=e.intersectLinePolyline(u,a,t),p=new e("No Intersection");return p.appendPoints(l.points),p.appendPoints(c.points),p.appendPoints(h.points),p.appendPoints(y.points),p.points.length>0&&(p.status="Intersection"),p}},{key:"intersectRectangleRectangle",value:function(t,n,r,a){var s=t.min(n),o=t.max(n),u=new i(o.x,s.y),l=new i(s.x,o.y),c=e.intersectLineRectangle(s,u,r,a),h=e.intersectLineRectangle(u,o,r,a),y=e.intersectLineRectangle(o,l,r,a),p=e.intersectLineRectangle(l,s,r,a),f=new e("No Intersection");return f.appendPoints(c.points),f.appendPoints(h.points),f.appendPoints(y.points),f.appendPoints(p.points),f.points.length>0&&(f.status="Intersection"),f}},{key:"intersectRayRay",value:function(t,n,r,a){var s,o=(a.x-r.x)*(t.y-r.y)-(a.y-r.y)*(t.x-r.x),u=(n.x-t.x)*(t.y-r.y)-(n.y-t.y)*(t.x-r.x),l=(a.y-r.y)*(n.x-t.x)-(a.x-r.x)*(n.y-t.y);if(0!==l){var c=o/l;(s=new e("Intersection")).points.push(new i(t.x+c*(n.x-t.x),t.y+c*(n.y-t.y)))}else s=new e(0===o||0===u?"Coincident":"Parallel");return s}}]),e}(),Y=function(){function e(){t(this,e)}return r(e,null,[{key:"arc",value:function(e,t,n,r,a,s){return P.arc.apply(P,arguments)}},{key:"quadraticBezier",value:function(e,t,n,r,a,s){return P.quadraticBezier.apply(P,arguments)}},{key:"cubicBezier",value:function(e,t,n,r,a,s,i,o){return P.cubicBezier.apply(P,arguments)}},{key:"circle",value:function(e,t,n){return P.circle.apply(P,arguments)}},{key:"ellipse",value:function(e,t,n,r){return P.ellipse.apply(P,arguments)}},{key:"line",value:function(e,t,n,r){return P.line.apply(P,arguments)}},{key:"path",value:function(e){return P.path.apply(P,arguments)}},{key:"polygon",value:function(e){return P.polygon.apply(P,arguments)}},{key:"polyline",value:function(e){return P.polyline.apply(P,arguments)}},{key:"rectangle",value:function(e,t,n,r){return P.rectangle.apply(P,arguments)}}]),e}(),C=function(){function e(){t(this,e)}return r(e,null,[{key:"arc",value:function(e,t,n,r,a){return P.arc.apply(P,arguments)}},{key:"quadraticBezier",value:function(e,t,n){return P.quadraticBezier.apply(P,arguments)}},{key:"cubicBezier",value:function(e,t,n,r){return P.cubicBezier.apply(P,arguments)}},{key:"circle",value:function(e,t){return P.circle.apply(P,arguments)}},{key:"ellipse",value:function(e,t,n){return P.ellipse.apply(P,arguments)}},{key:"line",value:function(e,t){return P.line.apply(P,arguments)}},{key:"path",value:function(e){return P.path.apply(P,arguments)}},{key:"polygon",value:function(e){return P.polygon.apply(P,arguments)}},{key:"polyline",value:function(e){return P.polyline.apply(P,arguments)}},{key:"rectangle",value:function(e,t){return P.rectangle.apply(P,arguments)}}]),e}(),L=function(){function e(){t(this,e)}return r(e,null,[{key:"circle",value:function(e){if(e instanceof SVGCircleElement==!1)throw new TypeError("Expected SVGCircleElement, but found ".concat(e));var t=new i(e.cx.baseVal.value,e.cy.baseVal.value),n=e.r.baseVal.value;return P.circle(t,n)}},{key:"ellipse",value:function(e){if(e instanceof SVGEllipseElement==!1)throw new TypeError("Expected SVGEllipseElement, but found ".concat(e));var t=new i(e.cx.baseVal.value,e.cy.baseVal.value),n=e.rx.baseVal.value,r=e.ry.baseVal.value;return P.ellipse(t,n,r)}},{key:"line",value:function(e){if(e instanceof SVGLineElement==!1)throw new TypeError("Expected SVGLineElement, but found ".concat(e));var t=new i(e.x1.baseVal.value,e.y1.baseVal.value),n=new i(e.x2.baseVal.value,e.y2.baseVal.value);return P.line(t,n)}},{key:"path",value:function(e){if(e instanceof SVGPathElement==!1)throw new TypeError("Expected SVGPathElement, but found ".concat(e));var t=e.getAttributeNS(null,"d");return P.path(t)}},{key:"polygon",value:function(e){if(e instanceof SVGPolygonElement==!1)throw new TypeError("Expected SVGPolygonElement, but found ".concat(e));for(var t=[],n=0;n<e.points.numberOfItems;n++){var r=e.points.getItem(n);t.push(new i(r.x,r.y))}return P.polygon(t)}},{key:"polyline",value:function(e){if(e instanceof SVGPolylineElement==!1)throw new TypeError("Expected SVGPolylineElement, but found ".concat(e));for(var t=[],n=0;n<e.points.numberOfItems;n++){var r=e.points.getItem(n);t.push(new i(r.x,r.y))}return P.polyline(t)}},{key:"rect",value:function(e){if(e instanceof SVGRectElement==!1)throw new TypeError("Expected SVGRectElement, but found ".concat(e));return P.rectangle(e.x.baseVal.value,e.y.baseVal.value,e.width.baseVal.value,e.height.baseVal.value,e.rx.baseVal.value,e.ry.baseVal.value)}},{key:"element",value:function(t){if(t instanceof SVGElement==!1)throw new TypeError("Expected SVGElement, but found ".concat(t));var n=t.tagName;switch(n){case"circle":return e.circle(t);case"ellipse":return e.ellipse(t);case"line":return e.line(t);case"path":return e.path(t);case"polygon":return e.polygon(t);case"polyline":return e.polyline(t);case"rect":return e.rect(t);default:throw new TypeError("Unrecognized element type: '".concat(n,"'"))}}}]),e}(),$={pointInCircle:function(e,t,n){return o.fromPoints(t,e).length()<=n},pointInEllipse:function(e,t,n,r){var a=e.subtract(t);return a.x*a.x/(n*n)+a.y*a.y/(r*r)<=1},pointInPolyline:function(e,t){for(var n,r=t.length,a=0,s=t[0],i=1;i<=r;i++){var o=t[i%r],u=Math.min(s.y,o.y),l=Math.max(s.y,o.y),c=Math.max(s.x,o.x);s.y!==o.y&&u<e.y&&e.y<=l&&e.x<=c&&(n=(e.y-s.y)*(o.x-s.x)/(o.y-s.y)+s.x,(s.x===o.x||e.x<=n)&&a++),s=o}return a%2==1}};$.pointInPolygon=$.pointInPolyline,$.pointInRectangle=function(e,t,n){return t.x<=e.x&&e.x<n.x&&t.y<=e.y&&e.y<n.y};export{C as AffineShapes,X as Intersection,P as IntersectionArgs,$ as IntersectionQuery,u as Matrix2D,i as Point2D,P as ShapeInfo,Y as Shapes,L as SvgShapes,o as Vector2D};
//# sourceMappingURL=index-esm.min.js.map
